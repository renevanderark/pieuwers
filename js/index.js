!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=32)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.KEYDOWN=0]="KEYDOWN",e[e.KEYUP=1]="KEYUP",e[e.UPDATE=2]="UPDATE",e[e.SPAWN_BULLET=3]="SPAWN_BULLET",e[e.SPAWN_ENEMY=4]="SPAWN_ENEMY",e[e.SPAWN_EXPLOSION=5]="SPAWN_EXPLOSION",e[e.ENEMY_RECEIVES_BULLET=6]="ENEMY_RECEIVES_BULLET",e[e.AXIS_X_CHANGE=7]="AXIS_X_CHANGE",e[e.AXIS_Y_CHANGE=8]="AXIS_Y_CHANGE",e[e.PIEUWER_COLLIDES=9]="PIEUWER_COLLIDES",e[e.ENEMY_COLLIDES_WITH_PIEUWER=10]="ENEMY_COLLIDES_WITH_PIEUWER",e[e.SET_COLLISIONS=11]="SET_COLLISIONS"}(t.ActionTypes||(t.ActionTypes={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.SKULL="SKULL",e.SKULL_BOSS="SKULL_BOSS",e.ENEMY_TWO="ENEMY_TWO"}(t.EnemyType||(t.EnemyType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VIRT_WIDTH=1600,t.VIRT_HEIGHT=1e3,t.PIEUWER_WIDTH=240,t.PIEUWER_HEIGHT=240},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1);t.ENEMY_BOUNDS=((r={})[o.EnemyType.SKULL]={x:100,y:160},r[o.EnemyType.SKULL_BOSS]={x:100,y:160},r[o.EnemyType.ENEMY_TWO]={x:98,y:80},r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBox=function(e){return"w"in e},t.isCircle=function(e){return"radius"in e},t.getBoundingBox=function(e){return{x:-e.size.x/2,y:-e.size.y/2,w:e.size.x,h:e.size.y}}},function(e,t,n){"use strict";(function(e,r){var o,i=n(8);o="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var a=Object(i.a)(o);t.a=a}).call(this,n(29),n(28)(e))},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(0),a=n(2),u=n(19);!function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT",e[e.SHOOT=4]="SHOOT"}(o=t.PieuwerControl||(t.PieuwerControl={}));var c=function(e,t,n){void 0===n&&(n=1);var r=[];for(t<e&&(n=-n);n>0?t>=e:t<=e;)r.push(e),e+=n;return r},s=function(e,t){return{axisX:null,axisY:null,accelerateLeft:!1,accelerateRight:!1,accelerateUp:!1,accelerateDown:!1,angle:0,ySpeed:0,shooting:!1,health:500,collisionShapes:t,pos:{x:e,y:a.VIRT_HEIGHT-150},size:{x:a.PIEUWER_WIDTH,y:a.PIEUWER_HEIGHT},collided:!1}},l={pieuwerOne:s(200,[{x:110-a.PIEUWER_WIDTH/2,y:0-a.PIEUWER_HEIGHT/2,w:20,h:230}].concat(c(50,100,10).map(function(e){return{x:e-a.PIEUWER_WIDTH/2,y:a.PIEUWER_HEIGHT-e-90,w:10,h:e-40}})).concat(c(10,60,10).map(function(e){return{x:e,y:30+1.1*e,w:10,h:80-1.1*e}}))),pieuwerTwo:s(a.VIRT_WIDTH-200,[{x:110-a.PIEUWER_WIDTH/2,y:0-a.PIEUWER_HEIGHT/2,w:20,h:230}].concat(c(60,100,10).map(function(e){return{x:e-a.PIEUWER_WIDTH/2,y:a.PIEUWER_HEIGHT/2-1.5*e-40,w:10,h:1.5*e-40}})).concat(c(10,60,10).map(function(e){return{x:e,y:1.6*e-a.PIEUWER_HEIGHT/2+20,w:10,h:140-1.6*e}})).concat([{x:-80,y:65,w:80,h:15},{x:-70,y:100,w:70,h:10},{x:0,y:50,w:85,h:20},{x:0,y:70,w:60,h:20},{x:0,y:90,w:85,h:20}]))},d=function(e){return r({},e,{collided:!1,ySpeed:null!==e.axisY?0===e.axisY?0:u.guardNumber(e.ySpeed+.25*e.axisY,5,-3):e.accelerateUp?u.guardNumber(e.ySpeed+.25,5,-3):e.accelerateDown?u.guardNumber(e.ySpeed-.25,5,-3):e.ySpeed<0?u.guardNumber(e.ySpeed+.25,0,-3):e.ySpeed>0?u.guardNumber(e.ySpeed-.25,5,0):0,angle:null!==e.axisX?0===e.axisX?0:u.guardNumber(e.angle+1.5*e.axisX,25,-25):e.accelerateLeft?u.guardNumber(e.angle-1.5,25,-25):e.accelerateRight?u.guardNumber(e.angle+1.5,25,-25):e.angle<0?u.guardNumber(e.angle+1.5,0,-25):e.angle>0?u.guardNumber(e.angle-1.5,25,0):0,pos:{y:u.guardNumber(Math.round(e.pos.y-e.ySpeed),a.VIRT_HEIGHT,0),x:u.guardNumber(Math.round(e.pos.x+.2*e.angle),a.VIRT_WIDTH,0)}})},f=function(e,t,n,o){var i,a;return r({},e,((i={})[t]=r({},e[t],((a={})[n]=o,a)),i))};t.default=function(e,t){var n,a,u;if(void 0===e)return l;switch(t.type){case i.ActionTypes.AXIS_X_CHANGE:return r({},e,((n={})[t.player]=r({},e[t.player],{axisX:t.axisForce}),n));case i.ActionTypes.AXIS_Y_CHANGE:return r({},e,((a={})[t.player]=r({},e[t.player],{axisY:t.axisForce}),a));case i.ActionTypes.KEYUP:switch(t.key){case o.UP:return f(e,t.player,"accelerateUp",!1);case o.DOWN:return f(e,t.player,"accelerateDown",!1);case o.LEFT:return f(e,t.player,"accelerateLeft",!1);case o.RIGHT:return f(e,t.player,"accelerateRight",!1);case o.SHOOT:return f(e,t.player,"shooting",!1);default:return e}case i.ActionTypes.KEYDOWN:switch(t.key){case o.UP:return f(e,t.player,"accelerateUp",!0);case o.DOWN:return f(e,t.player,"accelerateDown",!0);case o.LEFT:return f(e,t.player,"accelerateLeft",!0);case o.RIGHT:return f(e,t.player,"accelerateRight",!0);case o.SHOOT:return f(e,t.player,"shooting",!0);default:return e}case i.ActionTypes.PIEUWER_COLLIDES:return r({},e,((u={})[t.player]=r({},e[t.player],{collided:!0,health:e[t.player].health-1}),u));case i.ActionTypes.UPDATE:return{pieuwerOne:d(e.pieuwerOne),pieuwerTwo:d(e.pieuwerTwo)};default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translateToOrigin=function(e,t){return{x:e.x-t.x,y:e.y-t.y}},t.rotateAroundOrigin=function(e,t){return{x:e.x*Math.cos(t)-e.y*Math.sin(t),y:e.x*Math.sin(t)+e.y*Math.cos(t)}},t.rotateBoxAroundOrigin=function(e,n){return[t.rotateAroundOrigin({x:e.x,y:e.y},n),t.rotateAroundOrigin({x:e.x+e.w,y:e.y},n),t.rotateAroundOrigin({x:e.x+e.w,y:e.y+e.h},n),t.rotateAroundOrigin({x:e.x,y:e.y+e.h},n)]}},function(e,t,n){"use strict";function r(e){var t,n=e.Symbol;return"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable",t}n.d(t,"a",function(){return r})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pointWithinBox=function(e,t){var n=e.x,r=e.y,o=t.x,i=t.y,a=t.w,u=t.h;return n>=o&&n<=o+a&&r>=i&&r<=i+u}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(4),i=n(9),a=n(7),u=function(e,t){return t.map(function(t){return o.isBox(t)?i.pointWithinBox(e,t):function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<=t.radius}(e,t)}).filter(function(e){return e}).length>0},c=function(e,t){return i.pointWithinBox(a.rotateAroundOrigin(a.translateToOrigin(e,t.pos),-t.angle*Math.PI/180),o.getBoundingBox(t))};t.detectBulletToEnemyCollisions=function(e){var t=e.bulletStates.bullets,n=e.enemyStates.enemies;return t.map(function(e,t){return{enemies:n.map(function(e,t){return t}).filter(function(t){return function(e,t){return c(e.pos,t)&&u(a.rotateAroundOrigin(a.translateToOrigin(e.pos,t.pos),-t.angle*Math.PI/180),t.collisionShapes)}(e,n[t])}),bulletIdx:t,collsionPos:{x:e.pos.x,y:e.pos.y}}}).filter(function(e){var t=e.enemies;e.bulletIdx;return t.length>0})};var s=function(e,t){return a.rotateBoxAroundOrigin(o.getBoundingBox(e),e.angle*Math.PI/180).map(function(t){return a.translateToOrigin(e.pos,t)}).map(function(e){return t.map(function(e,t){return t}).filter(function(n){return c(e,t[n])})}).reduce(function(e,t){return e.concat(t)},[]).concat(t.map(function(t,n){return{idx:n,collides:a.rotateBoxAroundOrigin(o.getBoundingBox(t),t.angle*Math.PI/180).map(function(e){return a.translateToOrigin(t.pos,e)}).map(function(t){return c(t,e)}).indexOf(!0)>-1}}).filter(function(e){return e.collides}).map(function(e){return e.idx})).filter(function(e,t,n){return n.indexOf(e)===t})},l=function(e,t){return e.collisionShapes.map(function(n){if(o.isBox(n))return a.rotateBoxAroundOrigin(n,(e.angle+180)*Math.PI/180).map(function(t){return a.translateToOrigin(e.pos,t)}).map(function(e){return u(a.rotateAroundOrigin(a.translateToOrigin(e,t.pos),-t.angle*Math.PI/180),t.collisionShapes)});var c=r({},a.rotateAroundOrigin(a.translateToOrigin(a.translateToOrigin(e.pos,a.rotateAroundOrigin(n,(e.angle+180)*Math.PI/180)),t.pos),-t.angle*(Math.PI/180)),{radius:n.radius});return[t.collisionShapes.map(function(e){return o.isBox(e)?function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<=e.radius||Math.sqrt(Math.pow(e.x-(t.x+t.w),2)+Math.pow(e.y-t.y,2))<=e.radius||Math.sqrt(Math.pow(e.x-(t.x+t.w),2)+Math.pow(e.y-(t.y+t.h),2))<=e.radius||Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-(t.y+t.h),2))<=e.radius||i.pointWithinBox({x:e.x+Math.cos(Math.PI/180)*e.radius,y:e.y+Math.sin(Math.PI/180)*e.radius},t)||i.pointWithinBox({x:e.x+Math.cos(Math.PI/180*90)*e.radius,y:e.y+Math.sin(Math.PI/180*90)*e.radius},t)||i.pointWithinBox({x:e.x+Math.cos(Math.PI/180*180)*e.radius,y:e.y+Math.sin(Math.PI/180*180)*e.radius},t)||i.pointWithinBox({x:e.x+Math.cos(Math.PI/180*270)*e.radius,y:e.y+Math.sin(Math.PI/180*270)*e.radius},t)}(c,e):function(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))<=e.radius+t.radius}(c,e)}).indexOf(!0)>-1]})},d=function(e){return e.map(function(e,t){return{shapeIndex:t,collidingCorners:e.map(function(e,t){return{collides:e,idx:t}}).filter(function(e){var t=e.collides;e.idx;return t}).map(function(e){return e.idx})}}).filter(function(e){return e.collidingCorners.length>0})},f=function(e,t){var n=l(t,e),r=l(e,t),o=n.concat(r).reduce(function(e,t){return e.concat(t)},[]).indexOf(!0)>-1;return{collides:o,collidingCorners:o?d(n):[],collidingEnemyCorners:o?d(r):[]}};t.detectPieuwerToEnemyCollisions=function(e){var t=e.pieuwerStates,n=t.pieuwerOne,r=t.pieuwerTwo,o=e.enemyStates.enemies;return{pieuwerOne:s(n,o).map(function(e){return{collisions:f(o[e],n),enemyIdx:e}}).filter(function(e){return e.collisions.collides}),pieuwerTwo:s(r,o).map(function(e){return{collisions:f(o[e],r),enemyIdx:e}}).filter(function(e){return e.collisions.collides})}}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=n(4),a=n(3),u=function(e){return[{x:(4-a.ENEMY_BOUNDS[o.EnemyType.SKULL].x/2)*e,y:(63-a.ENEMY_BOUNDS[o.EnemyType.SKULL].y/2)*e,w:26*e,h:95*e},{x:(30-a.ENEMY_BOUNDS[o.EnemyType.SKULL].x/2)*e,y:(63-a.ENEMY_BOUNDS[o.EnemyType.SKULL].y/2)*e,w:51*e,h:82*e},{x:(58-a.ENEMY_BOUNDS[o.EnemyType.SKULL].x/2)*e,y:(42-a.ENEMY_BOUNDS[o.EnemyType.SKULL].y/2)*e,radius:40*e},{x:(27-a.ENEMY_BOUNDS[o.EnemyType.SKULL].x/2)*e,y:(50-a.ENEMY_BOUNDS[o.EnemyType.SKULL].y/2)*e,radius:20*e}]};t.makeEnemyCollisionShapes=((r={})[o.EnemyType.SKULL]=u,r[o.EnemyType.SKULL_BOSS]=u,r[o.EnemyType.ENEMY_TWO]=function(e){return[{x:-1.25,y:-13.75,radius:16.25},{x:-18.5,y:-13.75,w:33.75,h:37.5},{x:-41.25,y:14.5,w:78.75,h:12.5},{x:-37.5,y:9.5,w:71.25,h:5},{x:-33.75,y:4.5,w:63.75,h:5},{x:-36.25,y:30,radius:8.75},{x:32.5,y:30,radius:8.75}].map(function(t){return i.isBox(t)?{x:t.x*e,y:(t.y-6)*e,w:t.w*e,h:t.h*e}:{x:t.x*e,y:(t.y-6)*e,radius:t.radius*e}})},r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(11),o=n(3);t.makeEnemy=function(e,t,n,i,a){return{enemyType:e,accelerateLeft:!1,accelerateRight:!1,accelerateUp:!1,accelerateDown:!1,angle:0,ySpeed:0,shooting:!1,axisX:null,axisY:null,size:{x:o.ENEMY_BOUNDS[e].x*i,y:o.ENEMY_BOUNDS[e].y*i},collisionShapes:r.makeEnemyCollisionShapes[e](i),health:a||4,maxHealth:a||4,pos:{y:n,x:t},collided:!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o=n(6),i=n(12),a={ArrowUp:"pieuwerOne",ArrowDown:"pieuwerOne",ArrowLeft:"pieuwerOne",ArrowRight:"pieuwerOne",0:"pieuwerOne",w:"pieuwerTwo",s:"pieuwerTwo",a:"pieuwerTwo",d:"pieuwerTwo",c:"pieuwerTwo"},u={ArrowUp:o.PieuwerControl.UP,ArrowDown:o.PieuwerControl.DOWN,ArrowLeft:o.PieuwerControl.LEFT,ArrowRight:o.PieuwerControl.RIGHT,0:o.PieuwerControl.SHOOT,w:o.PieuwerControl.UP,s:o.PieuwerControl.DOWN,a:o.PieuwerControl.LEFT,d:o.PieuwerControl.RIGHT,c:o.PieuwerControl.SHOOT},c={a:o.PieuwerControl.SHOOT,up:o.PieuwerControl.UP,down:o.PieuwerControl.DOWN,left:o.PieuwerControl.LEFT,right:o.PieuwerControl.RIGHT};t.enemyActionCreator=function(e){return{spawnEnemy:function(t,n,o,a,u){void 0===a&&(a=1),e({type:r.ActionTypes.SPAWN_ENEMY,spawn:i.makeEnemy(t,n,o,a,u)})},enemiesReceiveBullet:function(t){var n=t.bulletIdx;t.enemies.forEach(function(t){return e({type:r.ActionTypes.ENEMY_RECEIVES_BULLET,enemyIdx:t,bulletIdx:n})})}}},t.explosionActionCreator=function(e){return{spawnExplosion:function(t,n){e({type:r.ActionTypes.SPAWN_EXPLOSION,pos:t,size:n})}}},t.bulletActionCreator=function(e){return{spawnBullet:function(t){if(t.shooting){var n=(t.angle-90)*(Math.PI/180);e({type:r.ActionTypes.SPAWN_BULLET,xPos:t.pos.x+120*Math.cos(n),yPos:t.pos.y+120*Math.sin(n),trajectory:n})}}}},t.keyActionCreator=function(e){return{onKeyDown:function(t){return e({type:r.ActionTypes.KEYDOWN,key:u[t],player:a[t]})},onKeyUp:function(t){return e({type:r.ActionTypes.KEYUP,key:u[t],player:a[t]})},onGamePadButtonDown:function(t,n){return e({type:r.ActionTypes.KEYDOWN,key:c[t],player:n})},onGamePadButtonUp:function(t,n){return e({type:r.ActionTypes.KEYUP,key:c[t],player:n})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),o={collisions:{}};t.default=function(e,t){if(void 0===e)return o;switch(t.type){case r.ActionTypes.SET_COLLISIONS:return{collisions:t.collisions};case r.ActionTypes.UPDATE:return{collisions:{}};default:return e}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i={explosions:[]},a=function(e){return r({},e,{size:e.size-1})};t.default=function(e,t){if(void 0===e)return i;switch(t.type){case o.ActionTypes.SPAWN_EXPLOSION:return{explosions:e.explosions.concat({size:t.size,initSize:t.size,pos:t.pos})};case o.ActionTypes.UPDATE:return{explosions:e.explosions.map(a).filter(function(e){return e.size>0})};default:return e}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),i=n(1);t.fly=function(e){return r({},e,{collided:!1,pos:e.enemyType===i.EnemyType.SKULL?{x:o.VIRT_WIDTH/2-Math.cos(4*e.angle*Math.PI/180)*o.VIRT_WIDTH/2,y:o.VIRT_HEIGHT/2-Math.sin(e.angle*Math.PI/180)*o.VIRT_WIDTH/5}:{x:o.VIRT_WIDTH/2,y:o.VIRT_HEIGHT/2-Math.sin(4*e.angle*Math.PI/180)*o.VIRT_WIDTH/5},angle:e.angle+.1>=360?0:e.angle+.1})}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(16),a={enemies:[]};t.default=function(e,t){if(void 0===e)return a;switch(t.type){case o.ActionTypes.ENEMY_RECEIVES_BULLET:return r({},e,{enemies:e.enemies.map(function(e,n){return r({},e,{health:n===t.enemyIdx?e.health-1:e.health})})});case o.ActionTypes.SPAWN_ENEMY:return r({},e,{enemies:e.enemies.concat(t.spawn)});case o.ActionTypes.ENEMY_COLLIDES_WITH_PIEUWER:return r({},e,{enemies:e.enemies.map(function(e,n){return r({},e,{health:n===t.enemyIdx?e.health-.04:e.health,collided:n===t.enemyIdx||e.collided})})});case o.ActionTypes.UPDATE:return r({},e,{enemies:e.enemies.map(i.fly).filter(function(e){return e.health>0})});default:return e}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),i=n(2),a={bullets:[]},u=function(e){return r({},e,{pos:{x:e.pos.x+10*Math.cos(e.trajectory),y:e.pos.y+10*Math.sin(e.trajectory)}})},c=function(e){return e.pos.x>0&&e.pos.x<i.VIRT_WIDTH&&e.pos.y>0&&e.pos.y<i.VIRT_HEIGHT};t.default=function(e,t){if(void 0===e)return a;switch(t.type){case o.ActionTypes.ENEMY_RECEIVES_BULLET:return{bullets:e.bullets.filter(function(e,n){return n!==t.bulletIdx})};case o.ActionTypes.SPAWN_BULLET:return{bullets:e.bullets.concat({pos:{x:t.xPos,y:t.yPos},trajectory:t.trajectory})};case o.ActionTypes.UPDATE:return{bullets:e.bullets.map(u).filter(c)};default:return e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.guardNumber=function(e,t,n){return e>t?t:e<n?n:e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(6),o=n(18),i=n(17),a=n(15),u=n(14);t.default={pieuwerStates:r.default,bulletStates:o.default,explosionStates:a.default,enemyStates:i.default,collisionStates:u.default}},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0});var o=n(1),i=new Image;i.src="./img/enemy.png";var a=new Image;a.src="./img/enemy2.png",t.enemySprites=((r={})[o.EnemyType.SKULL]=i,r[o.EnemyType.SKULL_BOSS]=i,r[o.EnemyType.ENEMY_TWO]=a,r)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(4),o=n(7),i=n(1),a=n(3),u=n(21),c=new Image;c.src="./img/pieuwerOne.png";var s=new Image;s.src="./img/pieuwerTwo.png";var l={pieuwerOne:c,pieuwerTwo:s};t.preload=function e(t){c.complete&&u.enemySprites[i.EnemyType.SKULL].complete&&u.enemySprites[i.EnemyType.ENEMY_TWO].complete?t():setTimeout(function(){return e(t)},1)};var d={},f=function(e,t,n){return function(r,o){r.save(),r.translate(Math.floor(e.pos.x*o),Math.floor(e.pos.y*o)),r.rotate(e.angle*Math.PI/180),r.drawImage(function(e,t,n){var r=e.src+"-"+n.x+"-"+n.y;return r in d||(d[r]=document.createElement("canvas"),d[r].width=n.x,d[r].height=n.y,d[r].getContext("2d").drawImage(e,0,0,t.x,t.y,0,0,n.x,n.y)),d[r]}(t,n,{x:Math.ceil(e.size.x*o),y:Math.ceil(e.size.y*o)}),Math.floor(-e.size.x/2*o),Math.floor(-e.size.y/2*o)),r.restore()}};t.drawPieuwer=function(e,t){return f(t,l[e],t.size)},t.drawEnemy=function(e){return f(e,u.enemySprites[e.enemyType],a.ENEMY_BOUNDS[e.enemyType])},t.drawCollisions=function(e,t){return function(n,i){n.fillStyle="rgba(255, 255, 255, 0.8)",t.forEach(function(t){t.forEach(function(t){var a=t.shapeIndex,u=t.collidingCorners,c=e.collisionShapes[a];if(r.isBox(c)){var s=o.rotateBoxAroundOrigin(c,(e.angle+180)*Math.PI/180);u.forEach(function(t){var r=o.translateToOrigin(e.pos,s[t]);n.beginPath(),n.arc(r.x*i,r.y*i,20*Math.random()*i,0,2*Math.PI),n.fill()})}else{var l=o.translateToOrigin(e.pos,o.rotateAroundOrigin(c,(e.angle+180)*Math.PI/180));n.beginPath(),n.arc((l.x+c.radius*Math.random()*2-c.radius)*i,(l.y+c.radius*Math.random()*2-c.radius)*i,20*Math.random()*i,0,2*Math.PI),n.fill()}})})}},t.drawBullet=function(e){return function(t,n){t.beginPath(),t.fillStyle="rgb(255,255,255)",t.arc(Math.floor(e.pos.x*n),Math.floor(e.pos.y*n),Math.ceil(3*n),0,2*Math.PI),t.fill()}},t.drawExplosion=function(e){return function(t,n){t.beginPath(),t.fillStyle="rgba(255,255,255, "+(.5+e.size/e.initSize*.5)+")",t.arc(Math.floor(e.pos.x*n),Math.floor(e.pos.y*n),Math.ceil(5*n*(e.initSize-e.size)),0,2*Math.PI),t.fill()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e,t=[];return{onResize:function(t){e=t},add:function(n,r,o){void 0===o&&(o=window);var i=function(t){return r(t,e)};t.push({elem:o,eventName:n,fn:i}),o.addEventListener(n,i)},clear:function(){t.forEach(function(e){var t=e.elem,n=e.eventName,r=e.fn;return t.removeEventListener(n,r)})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){var r=t/e;function o(e,t,r){n.forEach(function(n){return n(r,e,t)})}function i(){var t=window.innerWidth,n=window.innerHeight;t*r>n?o(Math.floor(n/r),n,n/r/e):o(t,Math.floor(t*r),t/e)}i(),window.addEventListener("resize",i)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return[function(t,n,r){e.forEach(function(e){e.style.left=Math.floor((window.innerWidth-n)/2)+"px",e.style.top=Math.floor((window.innerHeight-r)/2)+"px",e.width=n,e.height=r})}].concat(t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n,r=!1;return{onResize:function(e){n=e},clear:function(){r=!0},render:function(o){r&&(e.clearRect(0,0,t.width,t.height),r=!1),o.forEach(function(t){return t(e,n)})}}}},function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});t.initPadEvents=function(e,t,n){void 0===e&&(e=function(e){return console.warn("unmapped button index",e)}),void 0===t&&(t={0:["l-axis",0],1:["l-axis",1],2:["r-axis",0],3:["r-axis",1],4:["l-axis",0],5:["l-axis",1],6:["r-axis",0],7:["r-axis",1]}),void 0===n&&(n={0:"x",1:"a",2:"b",3:"y",9:"start",8:"select",5:"rt-shoulder",7:"rb-shoulder",4:"lt-shoulder",6:"lb-shoulder",10:"l-axis",11:"r-axis",12:"up",13:"down",14:"left",15:"right"});var o=["a","b","x","y","start","select","up","down","left","right","rt-shoulder","rb-shoulder","lt-shoulder","lb-shoulder","l-axis","r-axis"].reduce(function(e,t){return e[t]={pressed:"gamepad-"+t+"-pressed",released:"gamepad-"+t+"-released"},e},{}),i={},a={},u={},c={},s={},l=function(e){return Math.round(100*e)},d=function(e,t){if(1===e)return 100;if(-1===e)return-100;var n=l(e)-t;return n<20&&n>-20?0:n<0?-50:50},f=function(e){i[e.gamepad.index]=e.gamepad,a[e.gamepad.index]=r({},n),u[e.gamepad.index]=function(e){return Object.keys(e).reduce(function(t,n){return t[e[n]]=!1,t},{})}(a[e.gamepad.index]),c[e.gamepad.index]=e.gamepad.axes.map(function(e){return l(e)}),s[e.gamepad.index]=[]};return function n(){var r=function(n){var r=i[n];for(var f in 0===s[n].length&&(s[n]=r.axes.map(function(e){return l(e)}),c[n]=r.axes.map(function(e,t){return d(e,s[n][t])})),r.axes){var p=d(r.axes[f],s[n][parseInt(f)]);if(p!==c[n][parseInt(f)]){var y=t[f][0];0===t[f][1]?window.dispatchEvent(new CustomEvent("gamepad-"+y+"-x-change",{detail:{controllerIndex:n,force:p,measured:r.axes[f],rounded:l(r.axes[f])}})):window.dispatchEvent(new CustomEvent("gamepad-"+y+"-y-change",{detail:{controllerIndex:n,force:p,measured:r.axes[f],rounded:l(r.axes[f])}})),c[n][parseInt(f)]=p}}for(var f in r.buttons){var h=r.buttons[f].pressed,E=a[n][f];E&&u[n][E]!==h&&(u[n][E]=h,window.dispatchEvent(new CustomEvent(o[E][h?"pressed":"released"],{detail:{controllerIndex:n}}))),e&&h&&!E&&e(f)}};for(var f in i)r(f);requestAnimationFrame(n)}(),"ongamepadconnected"in window||setInterval(function(){for(var e=navigator.getGamepads?navigator.getGamepads():navigator.webkitGetGamepads?navigator.webkitGetGamepads():[],t=0;t<e.length;t++)e[t]&&(e[t].index in i||f({gamepad:e[t]}))},50),window.addEventListener("gamepadconnected",f),window.addEventListener("gamepaddisconnected",function(e){var t=e.gamepad;delete i[t.index],delete a[t.index],delete u[t.index],delete c[t.index],delete s[t.index]}),Object.keys(o).map(function(e){return["gamepad-"+e+"-pressed","gamepad-"+e+"-released"]}).reduce(function(e,t){return e.concat(t)}).concat(["gamepad-l-axis-x-change","gamepad-l-axis-y-change","gamepad-r-axis-x-change","gamepad-r-axis-y-change"])}},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t),n.d(t,"createStore",function(){return c}),n.d(t,"combineReducers",function(){return l}),n.d(t,"bindActionCreators",function(){return f}),n.d(t,"applyMiddleware",function(){return y}),n.d(t,"compose",function(){return p}),n.d(t,"__DO_NOT_USE__ActionTypes",function(){return o});var r=n(5),o={INIT:"@@redux/INIT"+Math.random().toString(36).substring(7).split("").join("."),REPLACE:"@@redux/REPLACE"+Math.random().toString(36).substring(7).split("").join(".")},i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function u(e){if("object"!==(void 0===e?"undefined":i(e))||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function c(e,t,n){var a;if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error("Expected the enhancer to be a function.");return n(c)(e,t)}if("function"!=typeof e)throw new Error("Expected the reducer to be a function.");var s=e,l=t,d=[],f=d,p=!1;function y(){f===d&&(f=d.slice())}function h(){if(p)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return l}function E(e){if("function"!=typeof e)throw new Error("Expected the listener to be a function.");if(p)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var t=!0;return y(),f.push(e),function(){if(t){if(p)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");t=!1,y();var n=f.indexOf(e);f.splice(n,1)}}}function w(e){if(!u(e))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(p)throw new Error("Reducers may not dispatch actions.");try{p=!0,l=s(l,e)}finally{p=!1}for(var t=d=f,n=0;n<t.length;n++){(0,t[n])()}return e}return w({type:o.INIT}),(a={dispatch:w,subscribe:E,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error("Expected the nextReducer to be a function.");s=e,w({type:o.REPLACE})}})[r.a]=function(){var e,t=E;return(e={subscribe:function(e){if("object"!==(void 0===e?"undefined":i(e))||null===e)throw new TypeError("Expected the observer to be an object.");function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[r.a]=function(){return this},e},a}function s(e,t){var n=t&&t.type;return"Given "+(n&&'action "'+String(n)+'"'||"an action")+', reducer "'+e+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function l(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];0,"function"==typeof e[i]&&(n[i]=e[i])}var a=Object.keys(n);var u=void 0;try{!function(e){Object.keys(e).forEach(function(t){var n=e[t];if(void 0===n(void 0,{type:o.INIT}))throw new Error('Reducer "'+t+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===n(void 0,{type:"@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".")}))throw new Error('Reducer "'+t+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')})}(n)}catch(e){u=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(u)throw u;for(var r=!1,o={},i=0;i<a.length;i++){var c=a[i],l=n[c],d=e[c],f=l(d,t);if(void 0===f){var p=s(c,t);throw new Error(p)}o[c]=f,r=r||f!==d}return r?o:e}}function d(e,t){return function(){return t(e.apply(this,arguments))}}function f(e,t){if("function"==typeof e)return d(e,t);if("object"!==(void 0===e?"undefined":i(e))||null===e)throw new Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":void 0===e?"undefined":i(e))+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var n=Object.keys(e),r={},o=0;o<n.length;o++){var a=n[o],u=e[a];"function"==typeof u&&(r[a]=d(u,t))}return r}function p(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function y(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];var i=e.apply(void 0,r),u=function(){throw new Error("Dispatching while constructing your middleware is not allowed. Other middleware would not be applied to this dispatch.")},c={getState:i.getState,dispatch:function(){return u.apply(void 0,arguments)}},s=t.map(function(e){return e(c)});return u=p.apply(void 0,s)(i.dispatch),a({},i,{dispatch:u})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(30),o=n(27),i=n(26),a=n(25),u=n(24),c=n(23),s=n(22),l=n(20),d=n(2),f=n(13),p=n(0),y=n(10),h=n(1),E=r.createStore(r.combineReducers(l.default)),w=f.keyActionCreator(E.dispatch),m=w.onKeyUp,x=w.onKeyDown,g=w.onGamePadButtonUp,v=w.onGamePadButtonDown,T=f.bulletActionCreator(E.dispatch).spawnBullet,O=f.enemyActionCreator(E.dispatch),I=O.spawnEnemy,_=O.enemiesReceiveBullet,b=f.explosionActionCreator(E.dispatch).spawnExplosion,S=document.getElementById("main-layer");if(!(S instanceof HTMLCanvasElement))throw new TypeError("wrong element type");var P=S.getContext("2d",{alpha:!1}),M=i.default(P,S),A=(document.getElementById("debug"),{0:"pieuwerOne",1:"pieuwerTwo"});o.initPadEvents();var L=c.default();L.add("keydown",function(e){x(e.key)}),L.add("keyup",function(e){m(e.key)}),["a","b","x","y"].forEach(function(e){L.add("gamepad-"+e+"-pressed",function(e){return v("a",A[e.detail.controllerIndex])}),L.add("gamepad-"+e+"-released",function(e){return g("a",A[e.detail.controllerIndex])})}),["up","left","right","down"].forEach(function(e){L.add("gamepad-"+e+"-pressed",function(t){return v(e,A[t.detail.controllerIndex])}),L.add("gamepad-"+e+"-released",function(t){return g(e,A[t.detail.controllerIndex])})}),["r","l"].forEach(function(e){L.add("gamepad-"+e+"-axis-x-change",function(e){E.dispatch({type:p.ActionTypes.AXIS_X_CHANGE,player:A[e.detail.controllerIndex],axisForce:Math.round(.01*e.detail.rounded)})})}),["r","l"].forEach(function(e){L.add("gamepad-"+e+"-axis-y-change",function(e){E.dispatch({type:p.ActionTypes.AXIS_Y_CHANGE,player:A[e.detail.controllerIndex],axisForce:-Math.round(.01*e.detail.rounded)})})}),u.default(d.VIRT_WIDTH,d.VIRT_HEIGHT,a.default([S],L.onResize,M.onResize));var N=function(e){_(e),b(e.collsionPos,8)},U=!1,j=function(){for(var e,t,n=function(){var e=E.getState(),t=e.pieuwerStates,r=e.bulletStates,o=e.enemyStates,i=e.explosionStates,a=e.collisionStates;M.clear(),M.render(r.bullets.map(s.drawBullet).concat(i.explosions.map(s.drawExplosion)).concat(o.enemies.map(s.drawEnemy).concat([s.drawPieuwer("pieuwerOne",t.pieuwerOne),s.drawPieuwer("pieuwerTwo",t.pieuwerTwo)]).concat(Object.keys(a.collisions).map(function(e){return s.drawCollisions(t[e],a.collisions[e].map(function(e){return e.collisions.collidingCorners}))})).concat(Object.keys(a.collisions).map(function(e){return a.collisions[e]}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){var t=e.enemyIdx,n=e.collisions;return s.drawCollisions(o.enemies[t],[n.collidingEnemyCorners])})))),U||requestAnimationFrame(n)},r=0;r<16;r++)setTimeout(function(){return I(h.EnemyType.SKULL,-100,-100,.75,30)},500*r),setTimeout(function(){return I(h.EnemyType.ENEMY_TWO,d.VIRT_WIDTH/2,d.VIRT_HEIGHT/2,1,10)},750*r);setTimeout(function(){return I(h.EnemyType.SKULL_BOSS,d.VIRT_WIDTH/2,d.VIRT_HEIGHT/2,4,150)},10);e=window.setInterval(function(){E.dispatch({type:p.ActionTypes.UPDATE}),y.detectBulletToEnemyCollisions(E.getState()).forEach(N),function(e){Object.keys(e).filter(function(t){return e[t].length>0}).forEach(function(e){return E.dispatch({type:p.ActionTypes.PIEUWER_COLLIDES,player:e})}),Object.keys(e).filter(function(t){return e[t].length>0}).map(function(t){return e[t]}).reduce(function(e,t){return e.concat(t)},[]).forEach(function(e){var t=e.enemyIdx;return E.dispatch({type:p.ActionTypes.ENEMY_COLLIDES_WITH_PIEUWER,enemyIdx:t})}),Object.keys(e).filter(function(t){return e[t].length>0}).length>0&&E.dispatch({type:p.ActionTypes.SET_COLLISIONS,collisions:e})}(y.detectPieuwerToEnemyCollisions(E.getState())),(E.getState().pieuwerStates.pieuwerOne.health<0||E.getState().pieuwerStates.pieuwerTwo.health<0)&&(S.style.opacity="0",U=!0,clearInterval(e),clearInterval(t),document.body.innerHTML='<div style="color: white; text-align: center">BOEM! GAME OVER</div>',setTimeout(function(){return location.reload()},3e3)),0===E.getState().enemyStates.enemies.length&&(S.style.opacity="0",U=!0,clearInterval(e),clearInterval(t),document.body.innerHTML='<div style="color: white; font-size: 5em; text-align: center">jA!</div>',setTimeout(function(){return location.reload()},3e3))},10),t=window.setInterval(function(){var e=E.getState().pieuwerStates,t=e.pieuwerOne,n=e.pieuwerTwo;T(t),T(n)},50),n()};s.preload(function(){return setTimeout(j,10)})},function(e,t,n){e.exports=n(31)}]);
//# sourceMappingURL=index.js.map