{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/actions/action-types.ts","webpack:///./src/store/constants.ts","webpack:///./node_modules/symbol-observable/es/index.js","webpack:///./src/store/enemy-reducer.ts","webpack:///./src/store/pieuwer-reducer.ts","webpack:///./node_modules/symbol-observable/es/ponyfill.js","webpack:///./node_modules/padevents/src/index.js","webpack:///./src/resizable-canvas/event-listeners.ts","webpack:///./src/resizable-canvas/viewport.ts","webpack:///./src/resizable-canvas/resize-listeners.ts","webpack:///./src/resizable-canvas/frame-renderer.ts","webpack:///./src/actions/action-creators.ts","webpack:///./src/store/bullet-reducer.ts","webpack:///./src/store/reducers.ts","webpack:///(webpack)/buildin/harmony-module.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/redux/es/redux.js","webpack:///./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ActionTypes","VIRT_WIDTH","VIRT_HEIGHT","root","_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__","self","window","global","result","__webpack_exports__","action_types_1","constants_1","initialState","enemies","collisionGrid","grid","x","COLLISION_GRID_SIZE","y","initializeCollisionGrid","updateCollisionGrid","state","newCollsionGrid","forEach","enemy","idx","xPos","collisionRadius","yPos","b","gB","gR","push","__assign","fly","enemyState","default","action","newState","type","ENEMY_RECEIVES_BULLET","map","health","enemyIdx","filter","SPAWN_ENEMY","concat","spawn","UPDATE","PieuwerControl","initializePieuwerState","accelerateLeft","accelerateRight","accelerateUp","accelerateDown","angle","ySpeed","shooting","pieuwerOne","pieuwerTwo","guardNumber","newNum","maxNum","minNum","updatePieuwerState","pieuwerState","Math","round","setPieuwerState","pieuwer","val","_a","_b","KEYUP","UP","player","DOWN","LEFT","RIGHT","SHOOT","KEYDOWN","symbolObservablePonyfill","observable","initPadEvents","onUnmappedButton","onControllersChange","axisMappings","0","1","2","3","defaultMappings","9","8","5","7","4","6","10","11","12","13","14","15","padEvents","reduce","acc","cur","pressed","released","controllers","keymaps","buttonstates","axisStates","axisCalibrations","roundOffAxisValue","axis","calibrateAxisValue","calib","rounded","registerController","ev","gamepad","index","assign","keymap","keys","initButtonStates","axes","dispatchPadEvents","controller","length","j","current","axName","dir","dispatchEvent","CustomEvent","detail","controllerIndex","force","measured","abs","buttons","buttonMapping","requestAnimationFrame","setInterval","gamepads","navigator","getGamepads","webkitGetGamepads","addEventListener","a","scale","registered","onResize","add","eventName","onEvent","elem","fn","clear","removeEventListener","vWidth","vHeight","listeners","aspectRatio","invokeListeners","width","height","listener","innerWidth","innerHeight","floor","canvases","_i","arguments","canvas","style","left","top","ctx","can","clearRequested","forceUpdate","render","drawables","clearRect","updated","draw","pieuwer_reducer_1","KeyboardToPlayerControlMap","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","w","KeyboardToPieuwerControlMap","GamepadToPieuwerControlMap","up","down","right","enemyActionCreator","dispatch","spawnEnemy","maxHealth","makeEnemy","enemiesReceiveBullet","bulletIdx","bulletActionCreator","spawnBullet","trajectory","PI","SPAWN_BULLET","cos","sin","keyActionCreator","onKeyDown","onKeyUp","onGamePadButtonDown","onGamePadButtonUp","bullets","bullet","explosion","withinBounds","notExploded","bullet_reducer_1","enemy_reducer_1","pieuwerStates","bulletStates","enemyStates","originalModule","webpackPolyfill","children","g","this","Function","eval","e","INIT","random","toString","substring","split","join","REPLACE","_typeof","iterator","obj","constructor","_extends","target","source","isPlainObject","proto","getPrototypeOf","createStore","reducer","preloadedState","enhancer","_ref2","undefined","Error","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","isSubscribed","indexOf","splice","replaceReducer","nextReducer","symbol_observable__WEBPACK_IMPORTED_MODULE_0__","_ref","outerSubscribe","observer","TypeError","observeState","next","unsubscribe","getUndefinedStateErrorMessage","actionType","String","combineReducers","reducers","reducerKeys","finalReducers","finalReducerKeys","shapeAssertionError","assertReducerShape","hasChanged","nextState","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","apply","bindActionCreators","actionCreators","boundActionCreators","compose","_len","funcs","Array","arg","applyMiddleware","middlewares","_len2","args","_key2","store","_dispatch","middlewareAPI","chain","middleware","redux_1","reducers_1","action_creators_1","frame_renderer_1","resize_listeners_1","viewport_1","event_listeners_1","padevents_1","pieuwerLayer","document","getElementById","pieuwerTwoLayer","bulletLayer","HTMLCanvasElement","pieuwerLayerCtx","getContext","pieuwerTwoLayerCtx","bulletLayerCtx","pieuwerOneFrameRenderer","pieuwerTwoFrameRenderer","bulletFrameRenderer","eventListeners","gamePadToPlayerMap","controllerIds","k","pieuwerOnePng","Image","src","pieuwerTwoPng","enemyPng","Pieuwer","img","stateChanged","clearX","clearY","updateState","save","translate","rotate","drawImage","restore","game","renderLoop","bs","beginPath","fillStyle","arc","fill","globalAlpha","bulletToCollisionKey","sqrt","pow","enemyCollidesWithBullet","preload","complete","setTimeout"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","export enum ActionTypes {\n  KEYDOWN,\n  KEYUP,\n  UPDATE,\n  SPAWN_BULLET,\n  SPAWN_ENEMY,\n  ENEMY_RECEIVES_BULLET\n}\n","export const VIRT_WIDTH = 1600;\nexport const VIRT_HEIGHT = 1000;\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import { ActionTypes } from \"../actions/action-types\";\nimport { PieuwerState } from \"./pieuwer-reducer\";\nimport { EnemyAction } from \"../actions/action-creators\";\nimport { VIRT_HEIGHT, VIRT_WIDTH } from \"./constants\";\n\nexport interface EnemyState extends PieuwerState {\n  maxHealth: number\n}\n\nexport type CollisionGrid = {[key: string] : Array<number>}\n\nexport interface MultiEnemyState {\n  enemies: Array<EnemyState>\n  collisionGrid: CollisionGrid\n}\n\nconst initializeCollisionGrid = () : CollisionGrid => {\n  let grid : CollisionGrid = {};\n  for(let x = 0; x < VIRT_WIDTH; x += COLLISION_GRID_SIZE) {\n    for(let y = 0; y < VIRT_HEIGHT; y += COLLISION_GRID_SIZE) {\n      grid[`${x}-${y}`] = [];\n    }\n  }\n  return grid;\n}\n\nconst initialState : MultiEnemyState =  {\n  enemies: [],\n  collisionGrid: initializeCollisionGrid()\n}\nexport const COLLISION_GRID_SIZE = 200;\n\nconst updateCollisionGrid = (state : MultiEnemyState) : MultiEnemyState => {\n    let newCollsionGrid : CollisionGrid = {};\n    for(let x = 0; x < VIRT_WIDTH; x += COLLISION_GRID_SIZE) {\n      for(let y = 0; y < VIRT_HEIGHT; y += COLLISION_GRID_SIZE) {\n        newCollsionGrid[`${x}-${y}`] = [];\n        state.enemies.forEach((enemy, idx) => {\n          const l = enemy.xPos - enemy.collisionRadius;\n          const r = enemy.xPos + enemy.collisionRadius;\n          const t = enemy.yPos - enemy.collisionRadius;\n          const b = enemy.yPos + enemy.collisionRadius;\n          const gB = y + COLLISION_GRID_SIZE;\n          const gR = x + COLLISION_GRID_SIZE;\n\n          // boundingBox within gridPos\n          if (l >= x && l <= gR && t >= y && t <= gB) { // topLeft\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (r >= x && r <= gR && t >= y && t <= gB) { // topRight\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (l >= x && l <= gR && b >= y && b <= gB) { // bottomLeft\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (r >= x && r <= gR && b >= y && b <= gB) { // bottomRight\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          // gridPos within bounding box\n          if (x >= l && x <= r && y >= t && y <= b) { // topLeft\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (gR >= l && gR <= r && y >= t && y <= b) { // topRight\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (x >= l && x <= r && gB >= t && gB <= b) { // bottomLeft\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n          if (gR >= l && gR <= r && gB >= t && gB <= b) { // bottomRight\n            newCollsionGrid[`${x}-${y}`].push(idx);\n            return;\n          }\n        });\n      }\n    }\n\n    return {\n      ...state,\n      collisionGrid: newCollsionGrid\n    };\n}\n\nconst fly = (enemyState : EnemyState) : EnemyState => enemyState\n\nexport default function(state : MultiEnemyState, action : EnemyAction) : MultiEnemyState {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  let newState = state;\n  switch (action.type) {\n    case ActionTypes.ENEMY_RECEIVES_BULLET:\n      newState = {\n        ...state,\n        enemies: state.enemies.map((enemy, idx) => ({\n          ...enemy,\n          health: idx === action.enemyIdx ? enemy.health - 1 : enemy.health\n        })).filter((enemy) => enemy.health > 0)\n      };\n      break;\n    case ActionTypes.SPAWN_ENEMY:\n      newState = {\n        ...state,\n        enemies: state.enemies.concat(action.spawn)\n      };\n      break;\n    case ActionTypes.UPDATE:\n      newState = {\n        ...state,\n        enemies: state.enemies.map(fly)\n      };\n      break;\n    default:\n      return state;\n  }\n  return updateCollisionGrid(newState);\n}\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { AnyAction } from \"redux\";\nimport { VIRT_WIDTH, VIRT_HEIGHT } from \"./constants\";\nimport { KeyAction } from \"../actions/action-creators\";\n\nconst yAcceleration = 0.25;\nconst maxYSpeed = 3;\nconst minYSpeed = -1.5;\n\nconst turnAcceleration = 1.5;\nconst maxAngle = 30;\nconst minAngle = -30;\n\ntype stateKey = \"accelerateUp\"|\"accelerateDown\"|\"accelerateLeft\"|\"accelerateRight\"|\"shooting\";\nexport type PieuwerKey = \"pieuwerOne\"|\"pieuwerTwo\";\n\nexport enum PieuwerControl {\n  UP, DOWN, LEFT, RIGHT, SHOOT\n}\n\n\nexport interface PieuwerState {\n  accelerateUp: boolean\n  accelerateDown: boolean\n  accelerateLeft: boolean\n  accelerateRight: boolean\n  angle: number\n  ySpeed: number\n  xPos: number\n  yPos: number\n  shooting: boolean\n  health: number\n  collisionRadius: number\n}\n\nexport interface MultiPieuwerState {\n  pieuwerOne: PieuwerState\n  pieuwerTwo: PieuwerState\n}\n\nconst initializePieuwerState = (xPos : number) : PieuwerState => ({\n  accelerateLeft: false, accelerateRight: false,\n  accelerateUp: false, accelerateDown: false,\n  angle: 0, ySpeed: 0, shooting: false,\n  collisionRadius: 50,\n  health: 100,\n  yPos: VIRT_HEIGHT - 150, xPos: xPos\n});\n\nconst initialState : MultiPieuwerState  = {\n  pieuwerOne: initializePieuwerState(200),\n  pieuwerTwo: initializePieuwerState(VIRT_WIDTH - 200)\n};\n\nconst guardNumber = (newNum : number, maxNum : number, minNum : number) : number =>\n  newNum > maxNum ? maxNum  : newNum < minNum ? minNum : newNum;\n\nconst updatePieuwerState = (pieuwerState : PieuwerState) : PieuwerState => ({\n    ...pieuwerState,\n    ySpeed: pieuwerState.accelerateUp\n      ? guardNumber(pieuwerState.ySpeed + yAcceleration, maxYSpeed, minYSpeed)\n      : pieuwerState.accelerateDown\n      ? guardNumber(pieuwerState.ySpeed - yAcceleration, maxYSpeed, minYSpeed)\n      : pieuwerState.ySpeed < 0\n      ? guardNumber(pieuwerState.ySpeed + yAcceleration, 0, minYSpeed)\n      : pieuwerState.ySpeed > 0\n      ? guardNumber(pieuwerState.ySpeed - yAcceleration, maxYSpeed, 0)\n      : 0,\n\n    angle: pieuwerState.accelerateLeft\n      ? guardNumber(pieuwerState.angle - turnAcceleration, maxAngle, minAngle)\n      : pieuwerState.accelerateRight\n      ? guardNumber(pieuwerState.angle + turnAcceleration, maxAngle, minAngle)\n      : pieuwerState.angle < 0\n      ? guardNumber(pieuwerState.angle + turnAcceleration, 0, minAngle)\n      : pieuwerState.angle > 0\n      ? guardNumber(pieuwerState.angle - turnAcceleration, maxAngle, 0)\n      : 0,\n\n    yPos: guardNumber(Math.round(pieuwerState.yPos - pieuwerState.ySpeed), VIRT_HEIGHT, 0),\n    xPos: guardNumber(Math.round(pieuwerState.xPos + pieuwerState.angle * 0.1), VIRT_WIDTH, 0)\n});\n\nconst setPieuwerState = (pieuwerState : MultiPieuwerState, pieuwer : PieuwerKey, key : stateKey, val : boolean) : MultiPieuwerState => ({\n    ...pieuwerState,\n    [pieuwer] : {\n      ...pieuwerState[pieuwer],\n      [key]: val\n    }\n});\n\nexport default function(state : MultiPieuwerState, action : KeyAction) {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.KEYUP:\n      switch (action.key) {\n        case PieuwerControl.UP:\n          return setPieuwerState(state, action.player, \"accelerateUp\", false);\n        case PieuwerControl.DOWN:\n          return setPieuwerState(state, action.player, \"accelerateDown\", false);\n        case PieuwerControl.LEFT:\n          return setPieuwerState(state, action.player, \"accelerateLeft\", false);\n        case PieuwerControl.RIGHT:\n          return setPieuwerState(state, action.player, \"accelerateRight\", false);\n        case PieuwerControl.SHOOT:\n          return setPieuwerState(state, action.player, \"shooting\", false);\n        default:\n          return state;\n      }\n\n    case ActionTypes.KEYDOWN:\n      switch (action.key) {\n        case PieuwerControl.UP:\n          return setPieuwerState(state, action.player, \"accelerateUp\", true);\n        case PieuwerControl.DOWN:\n          return setPieuwerState(state, action.player, \"accelerateDown\", true);\n        case PieuwerControl.LEFT:\n          return setPieuwerState(state, action.player, \"accelerateLeft\", true);\n        case PieuwerControl.RIGHT:\n          return setPieuwerState(state, action.player, \"accelerateRight\", true);\n        case PieuwerControl.SHOOT:\n          return setPieuwerState(state, action.player, \"shooting\", true);\n        default:\n          return state;\n      }\n    case ActionTypes.UPDATE:\n      return {\n        pieuwerOne: updatePieuwerState(state.pieuwerOne),\n        pieuwerTwo: updatePieuwerState(state.pieuwerTwo)\n      };\n    default:\n      return state;\n  }\n}\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","/*\nconst padEvents = initPadEvents();\nconsole.log(padEvents);\n\nObject.keys(padEvents).forEach((cur) => {\n  window.addEventListener(`gamepad-${cur}-pressed`, (ev) => {\n    console.log(`Controller ${ev.detail.controllerIndex} pressed: ${cur}`)\n    console.log(JSON.stringify(controllers[0].buttons.map(b => b.pressed)))\n  });\n  window.addEventListener(`gamepad-${cur}-released`, (ev) =>\n    console.log(`Controller ${ev.detail.controllerIndex} released: ${cur}`));\n});\n*/\nconst initPadEvents = ({\n    onUnmappedButton, onControllersChange\n  },\n  axisMappings = {\n    \"0\": [\"l-axis\", 0],\n    \"1\": [\"l-axis\", 1],\n    \"2\": [\"r-axis\", 0],\n    \"3\": [\"r-axis\", 1]\n  },\n  defaultMappings = {\n    \"0\": \"x\",\n    \"1\": \"a\",\n    \"2\": \"b\",\n    \"3\": \"y\",\n    \"9\": \"start\",\n    \"8\": \"select\",\n    \"5\": \"rt-shoulder\",\n    \"7\": \"rb-shoulder\",\n    \"4\": \"lt-shoulder\",\n    \"6\": \"lb-shoulder\",\n    \"10\": \"l-axis\",\n    \"11\": \"r-axis\",\n    \"12\": \"up\",\n    \"13\": \"down\",\n    \"14\": \"left\",\n    \"15\": \"right\"}) => {\n\n  const padEvents = [\n    \"a\", \"b\", \"x\", \"y\",\n    \"start\", \"select\", \"up\", \"down\", \"left\", \"right\",\n    \"rt-shoulder\", \"rb-shoulder\",\n    \"lt-shoulder\", \"lb-shoulder\",\n    \"l-axis\", \"r-axis\"\n  ].reduce((acc, cur) => {\n      acc[cur] = {\n        pressed: `gamepad-${cur}-pressed`,\n        released: `gamepad-${cur}-released`\n      };\n      return acc;\n  }, {});\n  let controllers = {};\n  let keymaps = {};\n  let buttonstates = {};\n  let axisStates = {};\n  let axisCalibrations = {};\n\n  const initButtonStates = (keymap) =>\n    Object.keys(keymap).reduce((acc, cur) => {\n      acc[keymap[cur]] = false;\n      return acc;\n    }, {});\n\n  const roundOffAxisValue = (axis) =>\n    Math.round(axis * 100);\n\n  const calibrateAxisValue = (axis, calib) => {\n    if (axis === 1.0) { return 100; }\n    if (axis === -1.0) { return -100; }\n    const rounded = roundOffAxisValue(axis) - calib;\n    if (rounded < 20 && rounded > -20) { return 0; }\n    return rounded < 0 ? -50 : 50;\n  }\n\n  const registerController = (ev) => {\n    controllers[ev.gamepad.index] = ev.gamepad;\n    keymaps[ev.gamepad.index] = Object.assign({}, defaultMappings);\n    buttonstates[ev.gamepad.index] = initButtonStates(keymaps[ev.gamepad.index]);\n    axisStates[ev.gamepad.index] = ev.gamepad.axes.map(axis => roundOffAxisValue(axis));\n    axisCalibrations[ev.gamepad.index] = [];\n    if (onControllersChange) {\n      onControllersChange(Object.keys(controllers));\n    }\n  }\n\n  const removeController = ({gamepad}) => {\n    delete controllers[gamepad.index];\n    delete keymaps[gamepad.index];\n    delete buttonstates[gamepad.index];\n    delete axisStates[gamepad.index];\n    delete axisCalibrations[gamepad.index];\n    if (onControllersChange) {\n      onControllersChange(Object.keys(controllers));\n    }\n  }\n\n  function dispatchPadEvents() {\n    for (let idx in controllers) {\n      const controller = controllers[idx];\n      if (axisCalibrations[idx].length === 0) {\n        axisCalibrations[idx] = controller.axes.map(axis => roundOffAxisValue(axis))\n        axisStates[idx] = controller.axes.map((axis, j) =>\n          calibrateAxisValue(axis,  axisCalibrations[idx][j]));\n      }\n\n      for (let i in controller.axes) {\n        const current = calibrateAxisValue(controller.axes[i],  axisCalibrations[idx][i]);\n        if (current !== axisStates[idx][i]) {\n          const [axName, dir] = axisMappings[i];\n          if (dir === 0) {\n            window.dispatchEvent(new CustomEvent(\n              `gamepad-${axName}-x-change`, { detail: {\n                  controllerIndex: idx,\n                  force: current,\n                  measured: controller.axes[i],\n                  rounded: roundOffAxisValue(controller.axes[i])\n                }\n              })\n            );\n          } else {\n            window.dispatchEvent(new CustomEvent(\n              `gamepad-${axName}-y-change`,\n              {detail: {controllerIndex: idx, force: Math.abs(current), measured: controller.axes[i]}}\n            ));\n          }\n          axisStates[idx][i] = current;\n\n        }\n      }\n\n      for (let i in controller.buttons) {\n        const { pressed } = controller.buttons[i];\n        const buttonMapping = keymaps[idx][i];\n\n        if (buttonMapping && buttonstates[idx][buttonMapping] !== pressed) {\n          buttonstates[idx][buttonMapping] = pressed;\n          window.dispatchEvent(new CustomEvent(\n            padEvents[buttonMapping][pressed ? \"pressed\" : \"released\"],\n            {detail: {controllerIndex: idx}}\n          ));\n        }\n\n        if (onUnmappedButton && pressed && !buttonMapping) {\n          onUnmappedButton(i);\n        }\n      }\n    }\n    requestAnimationFrame(dispatchPadEvents);\n  }\n\n  dispatchPadEvents();\n\n  function scangamepads() {\n    var gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads() : []);\n    for (var i = 0; i < gamepads.length; i++) {\n      if (gamepads[i]) {\n        if (!(gamepads[i].index in controllers)) {\n          registerController({gamepad: gamepads[i]});\n        }\n      }\n    }\n  }\n  const haveEvents = 'ongamepadconnected' in window;\n  if (!haveEvents) {\n    setInterval(scangamepads, 50);\n  }\n\n  window.addEventListener(\"gamepadconnected\", registerController);\n  window.addEventListener(\"gamepaddisconnected\", removeController);\n  return Object.keys(padEvents)\n  .map(x => [`gamepad-${x}-pressed`, `gamepad-${x}-released`])\n  .reduce((a,b) => a.concat(b))\n  .concat([\n    \"gamepad-l-axis-x-change\", \"gamepad-l-axis-y-change\",\n    \"gamepad-r-axis-x-change\", \"gamepad-r-axis-y-change\"\n  ]);\n}\n\nmodule.exports = { initPadEvents: initPadEvents }\n","type ScaledEventListener = (ev : Event) => (ev : Event, scale : number) => any;\n\ninterface ScaledEventRegistryEntry {\n  elem: HTMLElement|Window,\n  eventName: string,\n  fn : ScaledEventListener\n};\n\nexport default function() {\n\tlet scale : number;\n\tlet registered : Array<ScaledEventRegistryEntry> = [];\n\n\treturn {\n\t\tonResize(s : number) {\n\t\t\tscale = s;\n\t\t},\n\t\tadd(eventName : string, onEvent : (ev : Event, scale : number) => any, elem : HTMLElement|Window = window) {\n\t\t\tconst fn : ScaledEventListener = (ev : Event) => onEvent(ev, scale);\n\n\t\t\tregistered.push({\n\t\t\t\telem: elem,\n\t\t\t\teventName: eventName,\n\t\t\t\tfn: fn\n\t\t\t});\n\n\t\t\telem.addEventListener(eventName, fn);\n\t\t},\n\t\tclear() {\n\t\t\tregistered.forEach(({elem, eventName, fn}) =>\n\t\t\t\telem.removeEventListener(eventName, fn)\n\t\t\t)\n\t\t}\n\t}\n};\n","export default function(vWidth : number, vHeight : number, listeners : Array<(scale : number, width : number, height : number) => any>) {\n\tconst aspectRatio = vHeight / vWidth;\n\n\tfunction invokeListeners(width : number, height : number, scale : number) {\n\t\tlisteners.forEach(listener =>\tlistener(scale, width, height));\n\t}\n\n\tfunction onResize() {\n\t\tconst { innerWidth, innerHeight } = window;\n\t\tif (innerWidth * aspectRatio > innerHeight) {\n\t\t\tinvokeListeners(Math.floor(innerHeight / aspectRatio), innerHeight, (innerHeight / aspectRatio) / vWidth)\n\t\t} else {\n\t\t\tinvokeListeners(innerWidth, Math.floor(innerWidth * aspectRatio), innerWidth / vWidth)\n\t\t}\n\t}\n\n\tonResize();\n\twindow.addEventListener(\"resize\", onResize);\n}\n","export default (canvases : Array<HTMLCanvasElement>, ...listeners : Array<(scale : number) => void>) => {\n\tfunction rescaleGame(scale : number, width : number, height : number) {\n\t\tcanvases.forEach(canvas => {\n\t\t\tcanvas.style.left = `${Math.floor((window.innerWidth - width) / 2)}px`;\n\t\t\tcanvas.style.top = `${Math.floor((window.innerHeight - height) / 2)}px`;\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t});\n\t}\n\n\treturn [rescaleGame].concat(listeners);\n};\n","import {Drawable} from \"./drawable\";\n\nexport default function(ctx : CanvasRenderingContext2D, can : HTMLCanvasElement) {\n\tlet scale : number;\n\tlet clearRequested : boolean = false;\n\tlet forceUpdate = false;\n\treturn {\n\t\tonResize(s : number) {\n\t\t\tscale = s;\n\t\t\tforceUpdate = true;\n\t\t},\n\t\tclear() {\n\t\t\tclearRequested = true;\n\t\t},\n\t\trender(drawables : Array<Drawable>) {\n\t\t\tif (clearRequested) {\n\t\t\t\tctx.clearRect(0, 0, can.width, can.height);\n\t\t\t\tclearRequested = false;\n\t\t\t} else {\n\t\t\t\tdrawables.filter(d => forceUpdate || d.updated()).forEach(d => d.clear(ctx, scale));\n\t\t\t}\n\t\t\tdrawables.filter(d => forceUpdate || d.updated()).forEach(d => d.draw(ctx, scale));\n\t\t\tforceUpdate = false;\n\t\t}\n\t}\n}\n","import { Dispatch, AnyAction } from \"redux\";\nimport { ActionTypes } from \"./action-types\";\nimport { PieuwerControl, PieuwerKey, PieuwerState } from \"../store/pieuwer-reducer\";\nimport { EnemyState } from \"../store/enemy-reducer\";\n\n\n\nconst KeyboardToPlayerControlMap : {[key: string]: PieuwerKey } = {\n  ArrowUp: \"pieuwerOne\",\n  ArrowDown: \"pieuwerOne\",\n  ArrowLeft: \"pieuwerOne\",\n  ArrowRight: \"pieuwerOne\",\n  \"0\": \"pieuwerOne\",\n  w: \"pieuwerTwo\",\n  s: \"pieuwerTwo\",\n  a: \"pieuwerTwo\",\n  d: \"pieuwerTwo\",\n  c: \"pieuwerTwo\"\n};\n\nconst KeyboardToPieuwerControlMap : {[key: string]: PieuwerControl} = {\n  ArrowUp: PieuwerControl.UP,\n  ArrowDown: PieuwerControl.DOWN,\n  ArrowLeft: PieuwerControl.LEFT,\n  ArrowRight: PieuwerControl.RIGHT,\n  \"0\": PieuwerControl.SHOOT,\n  w: PieuwerControl.UP,\n  s: PieuwerControl.DOWN,\n  a: PieuwerControl.LEFT,\n  d: PieuwerControl.RIGHT,\n  c: PieuwerControl.SHOOT\n};\n\nconst GamepadToPieuwerControlMap : {[key: string]: PieuwerControl} = {\n  a: PieuwerControl.SHOOT,\n  up: PieuwerControl.UP,\n  down: PieuwerControl.DOWN,\n  left: PieuwerControl.LEFT,\n  right: PieuwerControl.RIGHT,\n};\n\nexport interface KeyAction  {\n  type: ActionTypes\n  key: PieuwerControl\n  player: PieuwerKey\n}\n\nexport interface BulletAction {\n  type: ActionTypes\n  xPos?: number\n  yPos?: number\n  trajectory?: number\n  bulletIdx?: number\n}\n\nexport interface EnemyAction {\n  type: ActionTypes\n  spawn?: EnemyState\n  enemyIdx?: number\n}\n\nconst makeEnemy = (xPos : number, yPos : number, health? : number, collisionRadius?: number) : EnemyState => ({\n  accelerateLeft: false, accelerateRight: false,\n  accelerateUp: false, accelerateDown: false,\n  angle: 0, ySpeed: 0, shooting: false,\n  collisionRadius: collisionRadius || 20,\n  health: health || 4, maxHealth: health || 4,\n  yPos: yPos, xPos: xPos\n});\n\nexport const enemyActionCreator = (dispatch : Dispatch<EnemyAction|BulletAction>) => ({\n  spawnEnemy: (xPos : number, yPos : number, health? : number, collisionRadius?: number) => {\n    dispatch({type: ActionTypes.SPAWN_ENEMY, spawn: makeEnemy(xPos, yPos, health, collisionRadius)})\n  },\n  enemiesReceiveBullet: ({bulletIdx, enemies} : {bulletIdx : number, enemies: Array<number>}) => {\n    enemies.forEach(enemyIdx => dispatch({type: ActionTypes.ENEMY_RECEIVES_BULLET, enemyIdx: enemyIdx, bulletIdx: bulletIdx}));\n\n  }\n});\n\nexport const bulletActionCreator = (dispatch : Dispatch<BulletAction>) => ({\n  spawnBullet: (pieuwer : PieuwerState) =>  {\n    if (pieuwer.shooting) {\n      const trajectory = (pieuwer.angle - 90) * (Math.PI / 180);\n      dispatch({\n        type: ActionTypes.SPAWN_BULLET,\n        xPos: pieuwer.xPos + Math.cos(trajectory) * 120,\n        yPos: pieuwer.yPos + Math.sin(trajectory) * 120,\n        trajectory: trajectory\n      });\n    }\n  }\n});\n\nexport const keyActionCreator = (dispatch : Dispatch<KeyAction>) => ({\n  onKeyDown: (key : string) => dispatch({type: ActionTypes.KEYDOWN, key: KeyboardToPieuwerControlMap[key], player: KeyboardToPlayerControlMap[key]}),\n  onKeyUp: (key : string) => dispatch({type: ActionTypes.KEYUP, key: KeyboardToPieuwerControlMap[key], player: KeyboardToPlayerControlMap[key]}),\n  onGamePadButtonDown: (key : string, player : PieuwerKey) => dispatch({type: ActionTypes.KEYDOWN, key: GamepadToPieuwerControlMap[key], player: player}),\n  onGamePadButtonUp: (key : string, player : PieuwerKey) => dispatch({type: ActionTypes.KEYUP, key: GamepadToPieuwerControlMap[key], player: player}),\n});\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { AnyAction } from \"redux\";\nimport { VIRT_WIDTH, VIRT_HEIGHT } from \"./constants\";\nimport { KeyAction, BulletAction } from \"../actions/action-creators\";\n\n\nexport interface BulletState {\n  trajectory: number,\n  xPos: number,\n  yPos: number,\n  explosion: number\n}\n\nexport interface MultiBulletState {\n  bullets: Array<BulletState>\n}\n\n\nconst initialState : MultiBulletState  = {\n  bullets: []\n};\n\nconst fly = (bullet : BulletState) : BulletState => ({\n  ...bullet,\n  xPos: bullet.xPos + Math.cos(bullet.trajectory) * (bullet.explosion < 0 ? 10 : 15),\n  yPos: bullet.yPos + Math.sin(bullet.trajectory) * (bullet.explosion < 0 ? 10 : 15),\n  explosion: bullet.explosion > 0 ? bullet.explosion - 1 : -1\n});\n\nconst withinBounds = (bullet : BulletState) : boolean  =>\n  bullet.xPos > 0 && bullet.xPos < VIRT_WIDTH && bullet.yPos > 0 && bullet.yPos < VIRT_HEIGHT;\n\nconst notExploded = (bullet : BulletState) : boolean  =>\n  bullet.explosion !== 0;\n\n\nexport default function(state : MultiBulletState, action : BulletAction) {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.ENEMY_RECEIVES_BULLET:\n    return {\n      bullets: state.bullets.map((bullet, idx) => ({\n        ...bullet,\n        explosion: idx === action.bulletIdx ? 8 : bullet.explosion,\n      }))\n    };\n    case ActionTypes.SPAWN_BULLET:\n      return {\n        bullets: state.bullets.concat({\n          explosion: -1,\n          xPos: action.xPos,\n          yPos: action.yPos,\n          trajectory: action.trajectory\n        })\n      };\n    case ActionTypes.UPDATE:\n      return {\n        bullets: state.bullets\n          .map(fly)\n          .filter(notExploded)\n          .filter(withinBounds)\n      };\n    default:\n      return state;\n  }\n}\n","import pieuwerReducer, { MultiPieuwerState } from \"./pieuwer-reducer\";\nimport bulletReducer, { MultiBulletState } from \"./bullet-reducer\";\nimport enemyReducer, { MultiEnemyState } from \"./enemy-reducer\";\n\nexport default {\n  pieuwerStates: pieuwerReducer,\n  bulletStates: bulletReducer,\n  enemyStates: enemyReducer\n}\n\nexport interface GameState {\n  pieuwerStates: MultiPieuwerState\n  bulletStates: MultiBulletState\n  enemyStates: MultiEnemyState\n}\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = {\n  INIT: '@@redux/INIT' + Math.random().toString(36).substring(7).split('').join('.'),\n  REPLACE: '@@redux/REPLACE' + Math.random().toString(36).substring(7).split('').join('.')\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) return false;\n\n  var proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.REPLACE });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if ((typeof observer === 'undefined' ? 'undefined' : _typeof(observer)) !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && 'action \"' + String(actionType) + '\"' || 'an action';\n\n  return 'Given ' + actionDescription + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if ((typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var store = createStore.apply(undefined, args);\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(undefined, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning(\"You are currently using minified code outside of NODE_ENV === 'production'. \" + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","import { createStore, combineReducers  } from 'redux';\nimport reducers, { GameState } from './store/reducers';\nimport { keyActionCreator, bulletActionCreator, enemyActionCreator } from './actions/action-creators';\nimport { ActionTypes } from './actions/action-types';\n\nimport getFrameRenderer from \"./resizable-canvas/frame-renderer\";\nimport getResizeListeners from \"./resizable-canvas/resize-listeners\";\nimport initViewPort from \"./resizable-canvas/viewport\";\nimport getEventListeners from './resizable-canvas/event-listeners';\nimport { VIRT_HEIGHT, VIRT_WIDTH } from './store/constants';\nimport { PieuwerState } from './store/pieuwer-reducer';\nimport { Drawable } from './resizable-canvas/drawable';\nimport { initPadEvents } from \"padevents\";\nimport { COLLISION_GRID_SIZE, EnemyState } from './store/enemy-reducer';\nimport { BulletState } from './store/bullet-reducer';\n\nconst store = createStore(combineReducers(reducers));\n\nconst {  onKeyUp, onKeyDown, onGamePadButtonUp, onGamePadButtonDown } = keyActionCreator(store.dispatch);\nconst { spawnBullet } = bulletActionCreator(store.dispatch);\nconst { spawnEnemy, enemiesReceiveBullet } = enemyActionCreator(store.dispatch);\n\nconst pieuwerLayer = document.getElementById(\"pieuwer-layer\");\nconst pieuwerTwoLayer = document.getElementById(\"pieuwer2-layer\");\nconst bulletLayer = document.getElementById(\"bullet-layer\");\nif (!(pieuwerLayer instanceof HTMLCanvasElement)) { throw new TypeError(\"wrong element type\"); }\nif (!(pieuwerTwoLayer instanceof HTMLCanvasElement)) { throw new TypeError(\"wrong element type\"); }\nif (!(bulletLayer instanceof HTMLCanvasElement)) { throw new TypeError(\"wrong element type\"); }\n\nconst pieuwerLayerCtx = pieuwerLayer.getContext(\"2d\");\nconst pieuwerTwoLayerCtx = pieuwerTwoLayer.getContext(\"2d\");\nconst bulletLayerCtx = bulletLayer.getContext(\"2d\");\n\n\nconst pieuwerOneFrameRenderer = getFrameRenderer(pieuwerLayerCtx, pieuwerLayer);\nconst pieuwerTwoFrameRenderer = getFrameRenderer(pieuwerTwoLayerCtx, pieuwerTwoLayer);\nconst bulletFrameRenderer = getFrameRenderer(bulletLayerCtx, bulletLayer);\n\nconst eventListeners = getEventListeners();\n\nlet gamePadToPlayerMap : {[key : string] : \"pieuwerOne\"|\"pieuwerTwo\"} = {};\n\ninitPadEvents({\n  onUnmappedButton : () => { },\n  onControllersChange: (controllerIds : Array<string>) => {\n    if (controllerIds.length > 0 && typeof gamePadToPlayerMap[controllerIds[0]] === 'undefined') {\n      gamePadToPlayerMap[controllerIds[0]] = \"pieuwerOne\";\n    }\n    if (controllerIds.length > 1 && typeof gamePadToPlayerMap[controllerIds[1]] === 'undefined') {\n      gamePadToPlayerMap[controllerIds[1]] = \"pieuwerTwo\";\n    }\n  }\n});\n\ninitViewPort(VIRT_WIDTH, VIRT_HEIGHT, getResizeListeners([pieuwerLayer, pieuwerTwoLayer, bulletLayer],\n  eventListeners.onResize,\n  pieuwerOneFrameRenderer.onResize,\n  pieuwerTwoFrameRenderer.onResize,\n  bulletFrameRenderer.onResize\n));\n\neventListeners.add(\"keydown\", (ev : KeyboardEvent) => { onKeyDown(ev.key); });\neventListeners.add(\"keyup\", (ev : KeyboardEvent) => { onKeyUp(ev.key); });\n\n['a', 'b', 'x', 'y'].forEach(k => {\n  eventListeners.add(`gamepad-${k}-pressed`, (ev : CustomEvent) => onGamePadButtonDown(\"a\", gamePadToPlayerMap[ev.detail.controllerIndex]));\n  eventListeners.add(`gamepad-${k}-released`, (ev : CustomEvent) => onGamePadButtonUp(\"a\", gamePadToPlayerMap[ev.detail.controllerIndex]));\n});\n\n['up', 'left', 'right', 'down'].forEach(k => {\n  eventListeners.add(`gamepad-${k}-pressed`, (ev : CustomEvent) => onGamePadButtonDown(k, gamePadToPlayerMap[ev.detail.controllerIndex]));\n  eventListeners.add(`gamepad-${k}-released`, (ev : CustomEvent) => onGamePadButtonUp(k, gamePadToPlayerMap[ev.detail.controllerIndex]));\n});\n\nconst debug = document.getElementById(\"debug\");\nlet updateTime = 0;\n\nconst pieuwerOnePng = new Image();\npieuwerOnePng.src = \"./img/pieuwerOne.png\";\nconst pieuwerTwoPng = new Image();\npieuwerTwoPng.src = \"./img/pieuwerTwo.png\";\nconst enemyPng = new Image();\nenemyPng.src = \"./img/enemy.png\";\n\n\nclass Pieuwer implements Drawable {\n  state: PieuwerState\n  stateChanged: boolean\n  clearX: number\n  clearY: number\n  img: HTMLImageElement\n\n  constructor(state : PieuwerState, img : HTMLImageElement) {\n    this.state = state;\n    this.stateChanged = true;\n    this.clearX = state.xPos;\n    this.clearY = state.yPos;\n    this.img = img;\n  }\n  updateState(newState : PieuwerState) {\n    this.stateChanged =\n      this.state.yPos !== newState.yPos ||\n      this.state.xPos !== newState.xPos ||\n      this.state.angle !== newState.angle;\n    this.state = newState;\n  }\n  draw(ctx: CanvasRenderingContext2D, scale: number) {\n    ctx.save();\n    ctx.translate(this.state.xPos * scale, this.state.yPos * scale);\n    ctx.rotate(this.state.angle * Math.PI / 180);\n    ctx.drawImage(this.img,0,0, 240, 240, -120*scale, -120*scale, 240*scale,240*scale );0\n    ctx.restore();\n\n\n    this.stateChanged = false;\n    this.clearX = this.state.xPos;\n    this.clearY = this.state.yPos;\n  }\n  clear(ctx: CanvasRenderingContext2D, scale: number) {\n    ctx.clearRect(\n\t\t\t(this.clearX - 150) * scale,\n\t\t\t(this.clearY - 150) * scale,\n\t\t\t300 * scale, 300 * scale\n\t\t);\n  }\n  updated() { return this.stateChanged; }\n}\n\nconst game = () => {\n  const pieuwerOne = new Pieuwer(store.getState().pieuwerStates.pieuwerOne, pieuwerOnePng);\n  const pieuwerTwo = new Pieuwer(store.getState().pieuwerStates.pieuwerTwo, pieuwerTwoPng);\n  pieuwerOneFrameRenderer.render([pieuwerOne]);\n  pieuwerTwoFrameRenderer.render([pieuwerTwo]);\n\n  const renderLoop = () => {\n    const { pieuwerStates, bulletStates, enemyStates } : GameState = store.getState();\n\n    pieuwerOne.updateState(pieuwerStates.pieuwerOne);\n    pieuwerTwo.updateState(pieuwerStates.pieuwerTwo);\n  //  debug.innerHTML = `${updateTime}\\n${JSON.stringify(store.getState().enemyStates.collisionGrid, null, 2)}`;\n\n    bulletFrameRenderer.clear();\n\n    pieuwerOneFrameRenderer.render([pieuwerOne]);\n    pieuwerTwoFrameRenderer.render([pieuwerTwo]);\n    bulletFrameRenderer.render(bulletStates.bullets.map((bs) => ({\n      updated: () => true,\n      clear: () => {},\n      draw: (ctx: CanvasRenderingContext2D, scale: number) => {\n        ctx.beginPath();\n        ctx.fillStyle = `rgba(255,255,255,${bs.explosion < 0 ? 1 : bs.explosion / 8})`;\n        ctx.arc(\n          bs.xPos * scale,\n          bs.yPos * scale,\n          5 * scale * (bs.explosion < 0 ? 1 : (8 - bs.explosion) * 2), 0, Math.PI*2\n        );\n        ctx.fill();\n      }\n    })).concat(enemyStates.enemies.map((enemy) => ({\n      updated: () => true,\n      clear: () => {},\n      draw: (ctx: CanvasRenderingContext2D, scale: number) => {\n        ctx.beginPath();\n        //ctx.fillStyle = `rgba(255,0,255,${enemy.health / enemy.maxHealth})`;\n        ctx.globalAlpha = (enemy.health / enemy.maxHealth) * 0.5 + 0.5;\n        ctx.drawImage(enemyPng,0,0, 100, 160,\n          (enemy.xPos - enemy.collisionRadius) * scale,\n          (enemy.yPos - enemy.collisionRadius) * scale,\n          100 * (enemy.collisionRadius / 50) * scale,\n          160 * (enemy.collisionRadius / 50) * scale);\n/*        ctx.arc(\n          enemy.xPos * scale,\n          enemy.yPos * scale,\n          enemy.collisionRadius * scale, 0, Math.PI*2\n        );*/\n\n\n        ctx.fill();\n      }\n    }))));\n  \trequestAnimationFrame(renderLoop);\n  };\n\n  for (let i = 0; i < 16; i++) {\n    spawnEnemy(i * 100, 150);\n    spawnEnemy(i * 100 + 50, 250);\n  }\n  spawnEnemy(500, 500, 50, 150);\n\n  const bulletToCollisionKey = (bullet : BulletState) : string =>\n    `${Math.floor(bullet.xPos / COLLISION_GRID_SIZE) * COLLISION_GRID_SIZE}-${Math.floor(bullet.yPos / COLLISION_GRID_SIZE) *  COLLISION_GRID_SIZE}`;\n\n  const enemyCollidesWithBullet = (bullet : BulletState, enemy: EnemyState) : boolean =>\n    Math.sqrt(Math.pow(bullet.xPos - enemy.xPos, 2) + Math.pow(bullet.yPos - enemy.yPos, 2)) < enemy.collisionRadius;\n\n  const updateLoop = () => {\n    const { bulletStates : { bullets }, enemyStates : { collisionGrid, enemies } } : GameState = store.getState();\n    let collisions = bullets\n      .map((bullet, bulletIdx) => ({\n        enemies: collisionGrid[bulletToCollisionKey(bullet)].filter((enemyIdx) => enemyCollidesWithBullet(bullet, enemies[enemyIdx])),\n        bulletIdx: bulletIdx\n      }))\n      .filter(({enemies, bulletIdx}) => bullets[bulletIdx].explosion < 0)\n      .forEach(enemiesReceiveBullet)\n\n    store.dispatch({type: ActionTypes.UPDATE});\n  }\n\n  window.setInterval(updateLoop, 10);\n  window.setInterval(() => {\n    const { pieuwerOne, pieuwerTwo } = store.getState().pieuwerStates;\n    spawnBullet(pieuwerOne);\n    spawnBullet(pieuwerTwo);\n  }, 50);\n\n  renderLoop();\n};\n\nfunction preload() {\n  if (pieuwerOnePng.complete && pieuwerTwoPng.complete && enemyPng.complete) {\n    game();\n  } else {\n    setTimeout(preload, 1);\n  }\n}\npreload();\n"],"sourceRoot":""}