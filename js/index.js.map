{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/actions/action-types.ts","webpack:///./src/store/constants.ts","webpack:///./src/store/thing.ts","webpack:///./src/enemies/types.ts","webpack:///./src/enemies/enemy-bounding-boxes.ts","webpack:///./src/phyz/shape-ops.ts","webpack:///./src/phyz/shapes.ts","webpack:///./node_modules/symbol-observable/es/index.js","webpack:///./src/enemies/enemy-fly-behaviours.ts","webpack:///./src/store/pieuwer-reducer.ts","webpack:///./node_modules/symbol-observable/es/ponyfill.js","webpack:///./src/levels.ts","webpack:///./src/phyz/boxes.ts","webpack:///./src/phyz/collisions.ts","webpack:///./src/enemies/enemy-collision-shapes.ts","webpack:///./src/enemies/enemy-creator.ts","webpack:///./src/actions/action-creators.ts","webpack:///./src/store/collision-reducer.ts","webpack:///./src/store/explosion-reducer.ts","webpack:///./src/store/enemy-reducer.ts","webpack:///./src/store/bullet-reducer.ts","webpack:///./src/phyz/guard-number.ts","webpack:///./src/store/reducers.ts","webpack:///./src/enemies/enemy-sprites.ts","webpack:///./src/draw.ts","webpack:///./src/resizable-canvas/event-listeners.ts","webpack:///./src/resizable-canvas/viewport.ts","webpack:///./src/resizable-canvas/resize-listeners.ts","webpack:///./src/resizable-canvas/frame-renderer.ts","webpack:///./src/padevents/index.ts","webpack:///(webpack)/buildin/harmony-module.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/redux/es/redux.js","webpack:///./src/index.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","ActionTypes","VIRT_WIDTH","VIRT_HEIGHT","PIEUWER_WIDTH","PIEUWER_HEIGHT","FireType","EnemyType","types_1","ENEMY_BOUNDS","_a","SKULL","x","y","ENEMY_TWO","MULTI_LASER","NAALDLASER","translateToOrigin","a","b","rotateAroundOrigin","angle","Math","cos","sin","rotateBoxAroundOrigin","w","h","distance","sqrt","pow","getClosestPoint","isBox","shape","isCircle","getBoundingBox","thing","size","global","root","_ponyfill_js__WEBPACK_IMPORTED_MODULE_0__","self","window","result","__webpack_exports__","FlyBehaviour","constants_1","shape_ops_1","flyBehaviours","DefensiveSlides","enemyState","spawnCentral","pieuwerPositions","__assign","pos","PI","ClockWiseFlyAround","SlowShootingClockWiseTurnAbout","startPos","trajectory","shooting","shootTimer","HorizontalQuarterHover","HorizontalQuarterHoverWithLaser","DoNothing","PointAtClosestPieuwer","target","withinFiringRange","fly","flyBehaviour","PieuwerControl","action_types_1","guard_number_1","thing_1","range","start","end","step","push","initializePieuwerState","xPos","collisionShapes","axisX","axisY","accelerateLeft","accelerateRight","accelerateUp","accelerateDown","ySpeed","health","maxHealth","fireType","BULLET","initialState","pieuwerOne","concat","map","pieuwerTwo","updatePieuwerState","pieuwerState","guardNumber","round","setPieuwerState","pieuwer","val","_b","default","state","action","type","RESET_INITIAL_STATE","AXIS_X_CHANGE","player","axisForce","AXIS_Y_CHANGE","KEYUP","UP","DOWN","LEFT","RIGHT","SHOOT","KEYDOWN","PIEUWER_COLLIDES","_c","UPDATE","symbolObservablePonyfill","observable","enemy_fly_behaviours_1","mkSkull","scale","mkEnemy2","mkMultiLaser","LASER","mkNaaldlaser","level1","spawnEnemy","setTimeout","pointWithinBox","bL","bT","getTr","getBl","getBr","shapes_1","boxes_1","pointWithinAreaList","shapes","radius","pointWithinCircle","filter","length","pointWithinBoundingBox","thingCollidesWithBullet","bullet","detectBulletToEnemyCollisions","bullets","bulletStates","enemies","enemyStates","bulletIdx","en","idx","enemyIdx","collsionPos","detectEnemyBulletToPieuwerCollisions","enemyBullets","pieuwerStates","pieuwerKeys","pieuwerKey","detectEnemyLaserToPieuwerCollisions","enemy","laserPoint","thingCollidesWithLaser","getBoundingBoxCollisionsForPieuwer","point","reduce","collides","indexOf","getCollidingCorners","thing1","thing2","testCircle_1","thing2Shape","circleCollidesWithBox","circleCollidesWithCircle","mapCollidingCorners","collidingCorners","corners","shapeIndex","getShapeCollisions","collidingEnemyCorners","detectPieuwerToEnemyCollisions","collisions","enemy_bounding_boxes_1","makeEnemyCollisionShapes","enemy_collision_shapes_1","makeEnemy","enemyType","pieuwer_reducer_1","enemy_creator_1","KeyboardToPlayerControlMap","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","0","KeyboardToPieuwerControlMap","GamepadToPieuwerControlMap","up","down","left","right","enemyActionCreator","dispatch","params","SPAWN_ENEMY","spawn","enemiesReceiveBullet","forEach","ENEMY_RECEIVES_BULLET","REMOVE_BULLET","bulletType","explosionActionCreator","spawnExplosion","SPAWN_EXPLOSION","bulletActionCreator","spawnBullet","SPAWN_BULLET","yPos","keyActionCreator","onKeyDown","onKeyUp","onGamePadButtonDown","onGamePadButtonUp","SET_COLLISIONS","explosions","explode","explosion","initSize","RESET_ENEMY_CENTRAL","ENEMY_COLLIDES_WITH_PIEUWER","speed","withinBounds","newNum","maxNum","minNum","bullet_reducer_1","enemy_reducer_1","explosion_reducer_1","collision_reducer_1","explosionStates","collisionStates","skullPng","Image","src","enemy2Png","multiLaserPng","naaldLaserPng","enemySprites","enemy_sprites_1","pieuwerOnePng","pieuwerTwoPng","pieuwerPngs","preload","callback","complete","keys","imgCache","drawThing","img","imgDims","ctx","isEnemy","save","translate","floor","healthBarWidth","fillStyle","fillRect","rotate","drawImage","targetRect","imgKey","document","createElement","width","height","getContext","getImage","ceil","restore","random","beginPath","arc","fill","drawPieuwer","ps","drawEnemy","drawCollisions","collisionList","points_1","pointIndex","tl","drawBullet","bs","drawExplosion","registered","onResize","add","eventName","onEvent","elem","fn","ev","addEventListener","clear","removeEventListener","vWidth","vHeight","listeners","aspectRatio","invokeListeners","listener","innerWidth","innerHeight","canvases","_i","arguments","canvas","style","top","can","clearRequested","render","drawables","clearRect","draw","initPadEvents","onUnmappedButton","axisMappings","defaultMappings","console","warn","1","2","3","4","5","6","7","9","8","10","11","12","13","14","15","padEvents","acc","cur","pressed","released","controllers","keymaps","buttonstates","axisStates","axisCalibrations","roundOffAxisValue","axis","calibrateAxisValue","calib","rounded","registerController","gamepad","index","keymap","initButtonStates","axes","dispatchPadEvents","controller","j","current","parseInt","axName","dispatchEvent","CustomEvent","detail","controllerIndex","force","measured","buttons","buttonMapping","requestAnimationFrame","setInterval","gamepads","navigator","getGamepads","webkitGetGamepads","originalModule","webpackPolyfill","children","g","this","Function","eval","e","createStore","combineReducers","bindActionCreators","applyMiddleware","compose","symbol_observable__WEBPACK_IMPORTED_MODULE_0__","INIT","toString","substring","split","join","REPLACE","_typeof","iterator","obj","constructor","_extends","assign","source","isPlainObject","proto","getPrototypeOf","reducer","preloadedState","enhancer","_ref2","undefined","Error","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","slice","getState","subscribe","isSubscribed","splice","replaceReducer","nextReducer","_ref","outerSubscribe","observer","TypeError","observeState","next","unsubscribe","getUndefinedStateErrorMessage","actionType","String","reducers","reducerKeys","finalReducers","finalReducerKeys","shapeAssertionError","assertReducerShape","hasChanged","nextState","_key","previousStateForKey","nextStateForKey","errorMessage","bindActionCreator","actionCreator","apply","actionCreators","boundActionCreators","_len","funcs","Array","arg","middlewares","_len2","args","_key2","store","_dispatch","middlewareAPI","chain","middleware","redux_1","padevents_1","frame_renderer_1","resize_listeners_1","viewport_1","event_listeners_1","draw_1","reducers_1","action_creators_1","collisions_1","levels_1","mainLayer","getElementById","HTMLCanvasElement","mainLayerCtx","mainFrameRenderer","levelplaat","gamePadToPlayerMap","eventListeners","clientHeight","handleBulletEnemyCollision","handleBulletPieuwerCollision","handleLaserToPieuwerCollision","game","level","gameOver","k","uploopinterval","bulletInterval","renderLoop","piewerKey","pk","spawns","gameState","handlePieuwerToEnemyCollisions","clearInterval","pickLevel","shift","display"],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 34);\n","export enum ActionTypes {\n  KEYDOWN,\n  KEYUP,\n  UPDATE,\n  SPAWN_BULLET,\n  SPAWN_ENEMY,\n  SPAWN_EXPLOSION,\n  ENEMY_RECEIVES_BULLET,\n  AXIS_X_CHANGE,\n  AXIS_Y_CHANGE,\n  PIEUWER_COLLIDES,\n  ENEMY_COLLIDES_WITH_PIEUWER,\n  SET_COLLISIONS,\n  REMOVE_BULLET,\n  RESET_ENEMY_CENTRAL,\n  RESET_INITIAL_STATE\n}\n","export const VIRT_WIDTH = 1600;\nexport const VIRT_HEIGHT = 1000;\n\nexport const PIEUWER_WIDTH = 240;\nexport const PIEUWER_HEIGHT = 240;\n","import { Box, Circle, Point } from \"../phyz/shapes\";\n\nexport enum FireType {\n  BULLET = \"BULLET\",\n  LASER = \"LASER\"\n}\n\nexport interface Thing {\n  collisionShapes: Array<Box|Circle>\n  angle: number\n  pos: Point\n  size: Point\n  fireType: FireType\n  shooting: boolean\n  health: number\n  maxHealth: number\n  shootTimer: number\n\n}\n","\nexport enum EnemyType {\n  SKULL = \"SKULL\",\n  ENEMY_TWO = \"ENEMY_TWO\",\n  MULTI_LASER = \"MULTI_LASER\",\n  NAALDLASER = \"NAALDLASER\"\n}\n","import { EnemyType } from \"./types\";\nimport { Point } from \"../phyz/shapes\";\n\nexport const ENEMY_BOUNDS : {[key:string] : Point} = {\n  [EnemyType.SKULL]: {x: 100, y: 160},\n  [EnemyType.ENEMY_TWO]: {x: 98, y: 80},\n  [EnemyType.MULTI_LASER]: {x: 100, y: 60},\n  [EnemyType.NAALDLASER]: {x: 142, y: 142}\n}\n","import { Point, Box } from \"./shapes\";\n\nexport const translateToOrigin = (a : Point, b: Point) : Point => ({\n  x: a.x - b.x,\n  y: a.y - b.y\n});\n\nexport const rotateAroundOrigin = (p : Point, angle : number) : Point => ({\n  x: p.x * Math.cos(angle) - p.y * Math.sin(angle),\n  y: p.x * Math.sin(angle) + p.y * Math.cos(angle)\n});\n\nexport const rotateBoxAroundOrigin = (b : Box, angle : number) : [Point, Point, Point, Point] => [\n  rotateAroundOrigin({x: b.x,       y: b.y},       angle),\n  rotateAroundOrigin({x: b.x + b.w, y: b.y},       angle),\n  rotateAroundOrigin({x: b.x + b.w, y: b.y + b.h}, angle),\n  rotateAroundOrigin({x: b.x,       y: b.y + b.h}, angle)\n];\n\nexport const distance = (a : Point, b : Point) : number =>\n  Math.sqrt(Math.pow(a.x - b.x, 2) + Math.pow(a.y - b.y, 2));\n\nexport const getClosestPoint = (a : Point, b : Point, c : Point) : Point =>\n  distance(a, b) < distance(a, c) ? b : c;\n","import { Thing } from \"../store/thing\";\n\nexport interface Point {\n  x: number,\n  y: number\n}\n\nexport interface Box extends Point {\n  w: number,\n  h: number\n}\n\nexport interface Circle extends Point {\n  radius: number\n}\n\nexport const isBox = <S extends Point>(shape : S) => 'w' in shape;\nexport const isCircle = <S extends Point>(shape : S) => 'radius' in shape;\n\n\nexport const getBoundingBox = (thing : Thing) : Box => ({\n  x: -thing.size.x / 2,\n  y: -thing.size.y / 2,\n  w: thing.size.x,\n  h: thing.size.y\n});\n","/* global window */\nimport ponyfill from './ponyfill.js';\n\nvar root;\n\nif (typeof self !== 'undefined') {\n  root = self;\n} else if (typeof window !== 'undefined') {\n  root = window;\n} else if (typeof global !== 'undefined') {\n  root = global;\n} else if (typeof module !== 'undefined') {\n  root = module;\n} else {\n  root = Function('return this')();\n}\n\nvar result = ponyfill(root);\nexport default result;\n","import { EnemyState } from \"../store/enemy-reducer\";\nimport { Point } from \"../phyz/shapes\";\nimport { VIRT_HEIGHT, VIRT_WIDTH } from \"../store/constants\";\nimport { getClosestPoint } from \"../phyz/shape-ops\";\n\nexport enum FlyBehaviour {\n  DoNothing = \"DoNothing\",\n  DefensiveSlides = \"DefensiveSlides\",\n  ClockWiseFlyAround = \"ClockWiseFlyAround\",\n  SlowShootingClockWiseTurnAbout = \"SlowShootingClockWiseTurnAbout\",\n  HorizontalQuarterHover = \"HorizontalQuarterHover\",\n  HorizontalQuarterHoverWithLaser = \"HorizontalQuarterHoverWithLaser\",\n  PointAtClosestPieuwer = \"PointAtClosestPieuwer\"\n};\n\nconst flyBehaviours : {[key in FlyBehaviour]: (enemyState : EnemyState, spawnCentral : Point, pieuwerPositions : Array<Point>) => EnemyState} = {\n  [FlyBehaviour.DefensiveSlides]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState,\n    pos: {\n      x: spawnCentral.x - Math.cos(enemyState.angle * Math.PI / 180) * spawnCentral.x,\n      y: spawnCentral.y + Math.sin(enemyState.angle / 3 * Math.PI / 180) * spawnCentral.y / 2\n    },\n    angle: enemyState.angle + 0.5 >= 360*3 ? 0 : enemyState.angle + 0.5\n  }),\n  [FlyBehaviour.ClockWiseFlyAround]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState,\n    pos: {\n      x: spawnCentral.x - Math.cos(enemyState.angle * Math.PI / 180) * spawnCentral.x / 1.8,\n      y: spawnCentral.y - Math.sin(enemyState.angle * Math.PI / 180) * spawnCentral.y / 1.1\n    },\n    angle: enemyState.angle + 0.5 >= 360*3 ? 0 : enemyState.angle + 0.5\n  }),\n  [FlyBehaviour.SlowShootingClockWiseTurnAbout]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState,\n    pos: {\n      x: enemyState.startPos.x + Math.cos(enemyState.trajectory * Math.PI / 180) * (VIRT_WIDTH / 8),\n      y: spawnCentral.y,\n    },\n    trajectory: enemyState.trajectory + 0.5 >= 360 ? 0 : enemyState.trajectory + 0.5,\n    shooting: enemyState.shootTimer <= 0 ? true : false,\n    shootTimer: enemyState.shootTimer <= 0 ? 20 : enemyState.shootTimer - 1,\n    angle: enemyState.angle - 0.5 <= 0 ? 360 : enemyState.angle - 0.5\n  }),\n  [FlyBehaviour.HorizontalQuarterHover]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState,\n    pos: {\n      x: enemyState.startPos.x + Math.cos(enemyState.trajectory * Math.PI / 180) * (VIRT_WIDTH / 4),\n      y: spawnCentral.y - VIRT_HEIGHT / 3\n    },\n    trajectory: enemyState.trajectory + 0.5 >= 360 ? 0 : enemyState.trajectory + 0.5,\n    shooting: enemyState.shootTimer <= 0 ? true : false,\n    shootTimer: enemyState.shootTimer <= 0 ? 50 : enemyState.shootTimer - 1\n  }),\n  [FlyBehaviour.HorizontalQuarterHoverWithLaser]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState,\n    pos: {\n      x: enemyState.startPos.x + Math.cos(enemyState.trajectory * Math.PI / 180) * (VIRT_WIDTH / 4),\n      y: spawnCentral.y - VIRT_HEIGHT / 3\n    },\n    trajectory: enemyState.trajectory + 0.5 >= 360 ? 0 : enemyState.trajectory + 0.5,\n    shooting: enemyState.shootTimer < 100,\n    shootTimer: enemyState.shootTimer <= 0 ? 400 : enemyState.shootTimer - 1\n  }),\n  [FlyBehaviour.DoNothing]: (enemyState, spawnCentral, pieuwerPositions) => ({\n    ...enemyState\n  }),\n  [FlyBehaviour.PointAtClosestPieuwer]: (enemyState, spawnCentral, pieuwerPositions) => {\n    const target = getClosestPoint(enemyState.pos, pieuwerPositions[0], pieuwerPositions[1]);\n    const withinFiringRange = enemyState.pos.y > enemyState.size.y / 2 &&\n      target.x >= enemyState.pos.x - 30 && target.x <= enemyState.pos.x + 30;\n\n    return {\n      ...enemyState,\n      pos: {\n        x:  enemyState.pos.y > enemyState.size.y / 2\n          ? target.x >= enemyState.pos.x - 30 && target.x <= enemyState.pos.x + 30\n            ? enemyState.pos.x\n            : target.x < enemyState.pos.x\n            ?  enemyState.pos.x - 2\n            : enemyState.pos.x + 2\n          : enemyState.pos.x,\n        y:  spawnCentral.y - VIRT_HEIGHT / 3\n      },\n      shooting: withinFiringRange && enemyState.shootTimer <= 0 ? true : false,\n      shootTimer: withinFiringRange\n        ? enemyState.shootTimer <= 0 ? 0  : enemyState.shootTimer - 1\n        : 100\n    }\n  }\n}\n\nexport const fly = (enemyState : EnemyState, spawnCentral : Point, pieuwerPositions: Array<Point>) : EnemyState =>\n  flyBehaviours[enemyState.flyBehaviour](enemyState, spawnCentral, pieuwerPositions);\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { VIRT_WIDTH, VIRT_HEIGHT, PIEUWER_WIDTH, PIEUWER_HEIGHT } from \"./constants\";\nimport { KeyAction } from \"../actions/action-creators\";\nimport { Box, Circle } from \"../phyz/shapes\";\nimport { guardNumber } from \"../phyz/guard-number\";\nimport { Thing, FireType } from \"./thing\";\n\nconst yAcceleration = 0.25;\nconst maxYSpeed = 5;\nconst minYSpeed = -3;\n\nconst turnAcceleration = 1.5;\nconst maxAngle = 25;\nconst minAngle = -25;\n\ntype stateKey = \"accelerateUp\"|\"accelerateDown\"|\"accelerateLeft\"|\"accelerateRight\"|\"shooting\";\nexport type PieuwerKey = \"pieuwerOne\"|\"pieuwerTwo\";\n\nexport enum PieuwerControl {\n  UP, DOWN, LEFT, RIGHT, SHOOT\n}\n\n\nexport interface PieuwerState extends Thing {\n  axisY: number\n  axisX: number\n  accelerateUp: boolean\n  accelerateDown: boolean\n  accelerateLeft: boolean\n  accelerateRight: boolean\n  ySpeed: number\n}\n\nexport interface MultiPieuwerState {\n  pieuwerOne: PieuwerState\n  pieuwerTwo: PieuwerState\n  [key: string]: PieuwerState\n}\nconst range = (start : number, end : number, step : number = 1) : Array<number> => {\n    var range = [];\n    if (end < start) {\n        step = -step;\n    }\n    while (step > 0 ? end >= start : end <= start) {\n        range.push(start);\n        start += step;\n    }\n\n    return range;\n}\n\n\nconst initializePieuwerState = (xPos : number, collisionShapes : Array<Box|Circle>) : PieuwerState => ({\n  axisX: null, axisY: null,\n  accelerateLeft: false, accelerateRight: false,\n  accelerateUp: false, accelerateDown: false,\n  angle: 0, ySpeed: 0, shooting: false,\n  health: 250,\n  maxHealth: 250,\n  fireType: FireType.BULLET,\n  collisionShapes: collisionShapes,\n  pos: {x: xPos, y: VIRT_HEIGHT - 150},\n  shootTimer: 0,\n  size: {x: PIEUWER_WIDTH, y: PIEUWER_HEIGHT},\n});\n\nconst initialState : MultiPieuwerState  = {\n  pieuwerOne: initializePieuwerState(200,  [\n    {x: (110 -  (PIEUWER_WIDTH  / 2)), y: (0 - (PIEUWER_HEIGHT / 2)), w: 20, h: 230},\n  ].concat(range(50, 100, 10).map(x => ({\n    x: (x -(PIEUWER_WIDTH  / 2)),\n    y: PIEUWER_HEIGHT - x - 90,\n    w: 10,\n    h: x - 40\n  }))).concat(range(10, 60, 10).map(x => ({\n    x: x,\n    y: 30 + (x*1.1),\n    w: 10,\n    h: 80 - x*1.1\n  })))),\n  pieuwerTwo: initializePieuwerState(VIRT_WIDTH - 200, [\n    {x: (110 -  (PIEUWER_WIDTH  / 2)), y: (0 - (PIEUWER_HEIGHT / 2)), w: 20, h: 230},\n  ].concat(range(60, 100, 10).map(x => ({\n    x: (x -(PIEUWER_WIDTH  / 2)),\n    y: (PIEUWER_HEIGHT / 2) - x * 1.5 - 40,\n    w: 10,\n    h: x * 1.5 - 40\n  }))).concat(range(10, 60, 10).map(x => ({\n    x: x,\n    y: (x*1.6) - (PIEUWER_HEIGHT / 2) + 20 ,\n    w: 10,\n    h: 140- x*1.6\n  }))).concat([\n    {x: -80, y: 65, w: 80, h: 15},\n    {x: -70, y: 100, w: 70, h: 10},\n    {x: 0, y: 50, w: 85, h: 20},\n    {x: 0, y: 70, w: 60, h: 20},\n    {x: 0, y: 90, w: 85, h: 20},\n  ])\n)\n};\n\nconst updatePieuwerState = (pieuwerState : PieuwerState) : PieuwerState => ({\n    ...pieuwerState,\n    ySpeed: pieuwerState.axisY !== null\n      ? pieuwerState.axisY === 0\n        ? 0\n        : guardNumber(pieuwerState.ySpeed + (yAcceleration * pieuwerState.axisY), maxYSpeed, minYSpeed)\n      : pieuwerState.accelerateUp\n        ? guardNumber(pieuwerState.ySpeed + yAcceleration, maxYSpeed, minYSpeed)\n        : pieuwerState.accelerateDown\n        ? guardNumber(pieuwerState.ySpeed - yAcceleration, maxYSpeed, minYSpeed)\n        : pieuwerState.ySpeed < 0\n        ? guardNumber(pieuwerState.ySpeed + yAcceleration, 0, minYSpeed)\n        : pieuwerState.ySpeed > 0\n        ? guardNumber(pieuwerState.ySpeed - yAcceleration, maxYSpeed, 0)\n        : 0,\n\n    angle: pieuwerState.axisX !== null\n      ? pieuwerState.axisX === 0\n        ? 0\n        : guardNumber(pieuwerState.angle + (turnAcceleration * pieuwerState.axisX), maxAngle, minAngle)\n      : pieuwerState.accelerateLeft\n        ? guardNumber(pieuwerState.angle - turnAcceleration, maxAngle, minAngle)\n        : pieuwerState.accelerateRight\n        ? guardNumber(pieuwerState.angle + turnAcceleration, maxAngle, minAngle)\n        : pieuwerState.angle < 0\n        ? guardNumber(pieuwerState.angle + turnAcceleration, 0, minAngle)\n        : pieuwerState.angle > 0\n        ? guardNumber(pieuwerState.angle - turnAcceleration, maxAngle, 0)\n        : 0,\n\n    pos: {\n      y: guardNumber(Math.round(pieuwerState.pos.y - pieuwerState.ySpeed), VIRT_HEIGHT, 0),\n      x: guardNumber(Math.round(pieuwerState.pos.x + pieuwerState.angle * 0.2), VIRT_WIDTH, 0)\n    }\n});\n\nconst setPieuwerState = (pieuwerState : MultiPieuwerState, pieuwer : PieuwerKey, key : stateKey, val : boolean) : MultiPieuwerState => ({\n    ...pieuwerState,\n    [pieuwer] : {\n      ...pieuwerState[pieuwer],\n      [key]: val\n    }\n});\n\nexport default function(state : MultiPieuwerState, action : KeyAction) {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.RESET_INITIAL_STATE:\n      return initialState;\n    case ActionTypes.AXIS_X_CHANGE:\n      return {\n          ...state,\n          [action.player] : {\n            ...state[action.player],\n            axisX: action.axisForce\n          }\n      };\n    case ActionTypes.AXIS_Y_CHANGE:\n      return {\n          ...state,\n          [action.player] : {\n            ...state[action.player],\n            axisY: action.axisForce\n          }\n      };\n    case ActionTypes.KEYUP:\n      switch (action.key) {\n        case PieuwerControl.UP:\n          return setPieuwerState(state, action.player, \"accelerateUp\", false);\n        case PieuwerControl.DOWN:\n          return setPieuwerState(state, action.player, \"accelerateDown\", false);\n        case PieuwerControl.LEFT:\n          return setPieuwerState(state, action.player, \"accelerateLeft\", false);\n        case PieuwerControl.RIGHT:\n          return setPieuwerState(state, action.player, \"accelerateRight\", false);\n        case PieuwerControl.SHOOT:\n          return setPieuwerState(state, action.player, \"shooting\", false);\n        default:\n          return state;\n      }\n\n    case ActionTypes.KEYDOWN:\n      switch (action.key) {\n        case PieuwerControl.UP:\n          return setPieuwerState(state, action.player, \"accelerateUp\", true);\n        case PieuwerControl.DOWN:\n          return setPieuwerState(state, action.player, \"accelerateDown\", true);\n        case PieuwerControl.LEFT:\n          return setPieuwerState(state, action.player, \"accelerateLeft\", true);\n        case PieuwerControl.RIGHT:\n          return setPieuwerState(state, action.player, \"accelerateRight\", true);\n        case PieuwerControl.SHOOT:\n          return setPieuwerState(state, action.player, \"shooting\", true);\n        default:\n          return state;\n      }\n\n    case ActionTypes.PIEUWER_COLLIDES:\n      return {\n          ...state,\n          [action.player] : {\n            ...state[action.player],\n            health: state[action.player].health - 1\n          }\n      };\n    case ActionTypes.UPDATE:\n      return {\n        pieuwerOne: updatePieuwerState(state.pieuwerOne),\n        pieuwerTwo: updatePieuwerState(state.pieuwerTwo)\n      };\n    default:\n      return state;\n  }\n}\n","export default function symbolObservablePonyfill(root) {\n\tvar result;\n\tvar Symbol = root.Symbol;\n\n\tif (typeof Symbol === 'function') {\n\t\tif (Symbol.observable) {\n\t\t\tresult = Symbol.observable;\n\t\t} else {\n\t\t\tresult = Symbol('observable');\n\t\t\tSymbol.observable = result;\n\t\t}\n\t} else {\n\t\tresult = '@@observable';\n\t}\n\n\treturn result;\n};\n","import { EnemyType } from \"./enemies/types\";\nimport { VIRT_WIDTH, VIRT_HEIGHT } from \"./store/constants\";\nimport { EnemySpawnParams } from \"./enemies/enemy-creator\";\nimport { FlyBehaviour } from \"./enemies/enemy-fly-behaviours\";\nimport { Point } from \"./phyz/shapes\";\nimport { FireType } from \"./store/thing\";\n\nconst mkSkull = (health : number, flyBehaviour? : FlyBehaviour, scale? : number) : EnemySpawnParams => ({\n  type: EnemyType.SKULL,\n  flyBehaviour: flyBehaviour || FlyBehaviour.DefensiveSlides,\n  pos: {x: VIRT_WIDTH / 2, y: -VIRT_HEIGHT / 3},\n  scale: scale || 0.75,\n  health:  health,\n  fireType: FireType.BULLET\n});\n\nconst mkEnemy2 = (health : number, pos: Point) : EnemySpawnParams => ({\n  type: EnemyType.ENEMY_TWO,\n  flyBehaviour: FlyBehaviour.HorizontalQuarterHover,\n  pos: pos,\n  scale: 1,\n  health:  health,\n  fireType: FireType.BULLET\n});\n\nconst mkMultiLaser = (health : number, pos: Point) : EnemySpawnParams => ({\n  type: EnemyType.MULTI_LASER,\n  flyBehaviour: FlyBehaviour.PointAtClosestPieuwer,\n  pos: pos,\n  scale: 2,\n  health:  health,\n  fireType: FireType.LASER\n});\n\nconst mkNaaldlaser = (health : number, pos: Point) : EnemySpawnParams => ({\n  type: EnemyType.NAALDLASER,\n  flyBehaviour:  FlyBehaviour.HorizontalQuarterHoverWithLaser,\n  pos: pos,\n  scale: 2,\n  health:  health,\n  fireType: FireType.LASER\n});\n\nexport type Level = (spawnEnemy : (p : EnemySpawnParams) => void) => Array<() => void>;\n\nexport const level1 : Level = (spawnEnemy) => [\n  () => {\n    for (let i = 0; i < 16; i++) {\n      setTimeout(() => spawnEnemy(mkSkull(5)), i * 250);\n    }\n  },\n  () => {\n    for (let i = 0; i < 12; i++) {\n      setTimeout(() => spawnEnemy(mkSkull(10)), i * 250);\n    }\n    for (let i = 0; i < 4; i++) {\n      spawnEnemy(mkEnemy2(5, {x: (VIRT_WIDTH / 8) + i * (VIRT_WIDTH / 4), y: -VIRT_HEIGHT / 3}));\n    }\n  },\n  () => {\n\n    spawnEnemy(mkNaaldlaser(20, {x: VIRT_WIDTH - VIRT_WIDTH / 2, y: -VIRT_HEIGHT / 3}));\n    setTimeout(() => spawnEnemy(mkNaaldlaser(20, {x: VIRT_WIDTH - VIRT_WIDTH / 2, y: -VIRT_HEIGHT / 3})), 1000);\n\n  },\n  () => {\n    for (let i = 0; i < 12; i++) {\n      setTimeout(() => spawnEnemy(mkSkull(20)), i * 250);\n    }\n    spawnEnemy(mkMultiLaser(150, {x: VIRT_WIDTH / 2 - VIRT_WIDTH / 4, y: -VIRT_HEIGHT / 3}));\n    spawnEnemy(mkMultiLaser(150, {x: VIRT_WIDTH / 2 + VIRT_WIDTH / 4, y: -VIRT_HEIGHT / 3}));\n  },\n  () => {\n    for (let i = 0; i < 15; i++) {\n      setTimeout(() => spawnEnemy(mkSkull(30, FlyBehaviour.ClockWiseFlyAround)), i * 500);\n    }\n    spawnEnemy(mkSkull(300, FlyBehaviour.SlowShootingClockWiseTurnAbout, 3));\n  }\n];\n","import { Box, Point } from \"./shapes\";\n\nexport const pointWithinBox : (p : Point, b: Box) => boolean = ({x, y}, {x : bL, y : bT, w, h}) =>\n  x >= bL && x <= bL + w && y >= bT && y <= bT + h\n\nexport const getTr = (b : Box) : Point => ({x: b.x + b.w, y: b.y});\nexport const getBl = (b : Box) : Point => ({x: b.x, y: b.y + b.h});\nexport const getBr = (b : Box) : Point => ({x: b.x + b.w, y: b.y + b.h});\n","import { BulletState } from \"../store/bullet-reducer\";\nimport { GameState } from \"../store/reducers\";\nimport { EnemyState } from \"../store/enemy-reducer\";\nimport { Point, Box, Circle, isBox, getBoundingBox } from \"./shapes\";\nimport { pointWithinBox, getTr, getBl, getBr } from \"./boxes\";\nimport { translateToOrigin, rotateAroundOrigin, rotateBoxAroundOrigin, distance} from \"./shape-ops\";\nimport { PieuwerState } from \"../store/pieuwer-reducer\";\nimport { Thing, FireType } from \"../store/thing\";\n\nconst pointWithinCircle = (pos : Point, c : Circle) : boolean =>\n  distance(pos, c) <= c.radius;\n\nconst pointWithinAreaList = (p : Point, shapes : Array<Circle|Box>) : boolean =>\n  shapes.map(shape => isBox(shape) ? pointWithinBox(p, <Box>shape) : pointWithinCircle(p, <Circle>shape))\n    .filter(result => result)\n    .length > 0;\n\n\n\nconst pointWithinBoundingBox = (pos : Point, thing : Thing) : boolean =>\n  pointWithinBox(\n    rotateAroundOrigin(\n      translateToOrigin(pos, thing.pos),\n      -thing.angle  * Math.PI / 180\n    ), getBoundingBox(thing))\n\nconst thingCollidesWithBullet = (bullet : BulletState, thing: Thing) : boolean =>\n    pointWithinBoundingBox(bullet.pos, thing) &&\n    pointWithinAreaList(\n      rotateAroundOrigin(\n        translateToOrigin(bullet.pos, thing.pos),\n        -thing.angle * Math.PI / 180),\n      thing.collisionShapes\n    );\n\n/* PREMATURE OPTIM.\nconst bulletToCollisionKey = (bullet : BulletState) : string =>\n  `${Math.floor(bullet.pos.x / COLLISION_GRID_SIZE) * COLLISION_GRID_SIZE}-${Math.floor(bullet.pos.y / COLLISION_GRID_SIZE) *  COLLISION_GRID_SIZE}`;\n*/\n\nexport const detectBulletToEnemyCollisions : (s : GameState) => Array<{enemies: Array<number>, bulletIdx : number, collsionPos: Point}> =\n  ({ bulletStates : { bullets }, enemyStates : { enemies } }) =>\n  bullets.map((bullet, bulletIdx) => ({\n    enemies: /* (collisionGrid[bulletToCollisionKey(bullet)]||[]) */\n      enemies.map((en, idx) => idx)\n      .filter((enemyIdx) => thingCollidesWithBullet(bullet, enemies[enemyIdx])),\n    bulletIdx: bulletIdx,\n    collsionPos: { x: bullet.pos.x, y: bullet.pos.y }\n  }))\n  .filter(({enemies, bulletIdx}) => enemies.length > 0)\n\nexport const detectEnemyBulletToPieuwerCollisions : (s : GameState) => Array<{pieuwerKeys: Array<string>, bulletIdx : number, collsionPos: Point}> =\n  ({ bulletStates : { enemyBullets }, pieuwerStates }) =>\n  enemyBullets.map((bullet, bulletIdx) => ({\n    pieuwerKeys: [\"pieuwerOne\", \"pieuwerTwo\"]\n      .filter(pieuwerKey => thingCollidesWithBullet(bullet, pieuwerStates[pieuwerKey])),\n    bulletIdx: bulletIdx,\n    collsionPos: { x: bullet.pos.x, y: bullet.pos.y }\n  }))\n  .filter(({pieuwerKeys, bulletIdx}) => pieuwerKeys.length > 0);\n\nconst thingCollidesWithLaser = (laserPoint : Point, thing: Thing) : boolean =>\n  laserPoint.x >= thing.pos.x - thing.size.x / 2 && laserPoint.x <= thing.pos.x + thing.size.x / 2;\n\nexport const detectEnemyLaserToPieuwerCollisions : (s : GameState) => Array<{pieuwerKeys: Array<string>}> =\n    ({ enemyStates : { enemies }, pieuwerStates }) =>\n    enemies\n      .filter(enemy => enemy.fireType === FireType.LASER && enemy.shooting)\n      .map((enemy) => ({ pieuwerKeys: [\"pieuwerOne\", \"pieuwerTwo\"]\n        .filter(pieuwerKey => thingCollidesWithLaser(enemy.pos, pieuwerStates[pieuwerKey])),\n      }))\n    .filter(({pieuwerKeys}) => pieuwerKeys.length > 0);\n\nconst getBoundingBoxCollisionsForPieuwer = (pieuwer : PieuwerState, enemies : Array<EnemyState>) : Array<number> =>\n  rotateBoxAroundOrigin(getBoundingBox(pieuwer), pieuwer.angle * Math.PI / 180)\n      .map(point => translateToOrigin(pieuwer.pos, point))\n      .map(point => enemies.map((en, idx) => idx).filter(idx => pointWithinBoundingBox(point, enemies[idx])))\n      .reduce((a,b) => a.concat(b), [])\n    .concat(enemies\n      .map((enemy, enemyIdx) => ({\n        idx: enemyIdx,\n        collides: rotateBoxAroundOrigin(getBoundingBox(enemy), enemy.angle * Math.PI / 180)\n          .map(point => translateToOrigin(enemy.pos, point))\n          .map(point => pointWithinBoundingBox(point, pieuwer))\n          .indexOf(true) > -1\n      }))\n      .filter(({collides}) => collides)\n      .map(({idx}) => idx)\n    ).filter((val, idx, self) => self.indexOf(val) === idx);\n\n\nconst circleCollidesWithCircle = (a : Circle, b : Circle) =>\n  distance(a, b) <= a.radius + b.radius;\n\n\n\nconst circleCollidesWithBox = (c : Circle, b : Box) =>\n  distance(c, b) <= c.radius ||\n  distance(c, getTr(b)) <= c.radius ||\n  distance(c, getBl(b)) <= c.radius ||\n  distance(c, getBr(b)) <= c.radius ||\n  pointWithinBox({x: c.x + Math.cos(Math.PI / 180) * c.radius, y: c.y + Math.sin(Math.PI / 180) * c.radius}, b) ||\n  pointWithinBox({x: c.x + Math.cos(90 * (Math.PI / 180)) * c.radius, y: c.y + Math.sin(90 * (Math.PI / 180)) * c.radius}, b) ||\n  pointWithinBox({x: c.x + Math.cos(180 * (Math.PI / 180)) * c.radius, y: c.y + Math.sin(180 * (Math.PI / 180)) * c.radius}, b) ||\n  pointWithinBox({x: c.x + Math.cos(270 * (Math.PI / 180)) * c.radius, y: c.y + Math.sin(270 * (Math.PI / 180)) * c.radius}, b)\n\n\nexport type CollisionList = Array<{shapeIndex: number, collidingCorners: Array<number>}>;\n\nexport interface ShapeCollisions {\n  collides: boolean\n  collidingCorners: CollisionList\n  collidingEnemyCorners: CollisionList\n}\n\nconst getCollidingCorners = (thing1 : Thing, thing2 : Thing) : Array<Array<boolean>> =>\n  thing1.collisionShapes.map(shape => {\n    if (isBox(shape)) {\n      return rotateBoxAroundOrigin(<Box>shape, (thing1.angle+180) * Math.PI / 180)\n        .map(point => translateToOrigin(thing1.pos, point))\n        .map(point =>\n          pointWithinAreaList(\n            rotateAroundOrigin(translateToOrigin(point, thing2.pos), -thing2.angle * Math.PI / 180), thing2.collisionShapes))\n    } else {\n      const testCircle = {\n              ...rotateAroundOrigin(translateToOrigin(translateToOrigin(thing1.pos, rotateAroundOrigin(shape, (thing1.angle+180) * Math.PI / 180)), thing2.pos), -thing2.angle * (Math.PI / 180)),\n              radius: (<Circle>shape).radius\n            };\n      return [thing2.collisionShapes.map(thing2Shape => {\n        if (isBox(thing2Shape)) {\n          return circleCollidesWithBox(\n            testCircle,\n            <Box>thing2Shape\n          )\n        } else {\n          return circleCollidesWithCircle(\n              testCircle,\n              <Circle>thing2Shape,\n          );\n        }\n      }).indexOf(true) > -1]\n    }\n  });\n\nconst mapCollidingCorners = (collidingCorners : Array<Array<boolean>>) : CollisionList =>\n  collidingCorners.map((corners, shapeIndex) => ({\n      shapeIndex: shapeIndex,\n      collidingCorners: corners.map((c, idx) => ({collides: c, idx: idx}))\n      .filter(({collides, idx}) => collides).map(({idx}) => idx)\n    }))\n    .filter(({collidingCorners}) => collidingCorners.length > 0)\n\nconst getShapeCollisions = (enemy : EnemyState, pieuwer : PieuwerState) : ShapeCollisions => {\n  const collidingCorners = getCollidingCorners(pieuwer, enemy);\n  const collidingEnemyCorners = getCollidingCorners(enemy, pieuwer);\n  const collides = collidingCorners.concat(collidingEnemyCorners)\n    .reduce((a,b) => a.concat(b), []).indexOf(true) > -1\n\n  return {\n    collides: collides,\n    collidingCorners: collides\n      ? mapCollidingCorners(collidingCorners)\n      : [],\n    collidingEnemyCorners: collides\n      ? mapCollidingCorners(collidingEnemyCorners)\n      : [],\n  };\n};\n\nexport interface PieuwerToEnemyCollisions {\n  [key: string]: Array<{enemyIdx : number, collisions: ShapeCollisions}>\n}\n\nexport const detectPieuwerToEnemyCollisions : (s : GameState) => PieuwerToEnemyCollisions =\n  ({ pieuwerStates : { pieuwerOne, pieuwerTwo }, enemyStates : { enemies } }) => {\n    return {\n      \"pieuwerOne\": getBoundingBoxCollisionsForPieuwer(pieuwerOne, enemies)\n        .map(enemyIdx => ({\n          collisions: getShapeCollisions(enemies[enemyIdx], pieuwerOne),\n          enemyIdx: enemyIdx\n        }))\n        .filter(({collisions}) => collisions.collides),\n      \"pieuwerTwo\" : getBoundingBoxCollisionsForPieuwer(pieuwerTwo, enemies)\n        .map(enemyIdx => ({\n          collisions: getShapeCollisions(enemies[enemyIdx], pieuwerTwo),\n          enemyIdx: enemyIdx\n        }))\n        .filter(({collisions}) => collisions.collides),\n    };\n}\n","import { EnemyType } from \"./types\";\nimport { Circle, Box, isBox } from \"../phyz/shapes\";\nimport { ENEMY_BOUNDS } from \"./enemy-bounding-boxes\";\n\nconst makeSkullShapes = (scale : number) : Array<Box|Circle> => [\n  {\n    x: (4 -  (ENEMY_BOUNDS[EnemyType.SKULL].x  / 2)) * scale,\n    y: (63 - (ENEMY_BOUNDS[EnemyType.SKULL].y / 2)) * scale,\n    w: 26 * scale,\n    h: 95 * scale\n  },\n  {\n    x: (30 -  (ENEMY_BOUNDS[EnemyType.SKULL].x  / 2)) * scale,\n    y: (63 - (ENEMY_BOUNDS[EnemyType.SKULL].y / 2)) * scale,\n    w: 51 * scale,\n    h: 82 * scale\n  },\n  {\n    x: (58 -  (ENEMY_BOUNDS[EnemyType.SKULL].x  / 2)) * scale,\n    y: (42 - (ENEMY_BOUNDS[EnemyType.SKULL].y / 2)) * scale,\n    radius: 40 * scale\n  },\n  {\n    x: (27 -  (ENEMY_BOUNDS[EnemyType.SKULL].x  / 2)) * scale,\n    y: (50 - (ENEMY_BOUNDS[EnemyType.SKULL].y / 2)) * scale,\n    radius: 20 * scale\n  }\n];\n\nconst makeEnemyTwoShapes = (scale : number) : Array<Box|Circle> => [\n  {\n    x: -1.25,\n    y: -13.75,\n    radius: 16.25\n  },\n  {\n    x: -18.5,\n    y: -13.75,\n    w: 33.75,\n    h: 37.5\n  },\n  {\n    x: -41.25,\n    y: 14.5,\n    w: 78.75,\n    h: 12.5\n  },\n  {\n    x: -37.5,\n    y: 9.5,\n    w: 71.25,\n    h: 5\n  },\n  {\n    x: -33.75,\n    y: 4.5,\n    w: 63.75,\n    h: 5\n  },\n  {\n    x: -36.25,\n    y: 30,\n    radius: 8.75\n  },\n  {\n    x: 32.5,\n    y: 30,\n    radius: 8.75\n  }\n].map(shape => isBox(shape) ?\n  {\n    x: shape.x * scale,\n    y: (shape.y-6) * scale,\n    w: shape.w * scale,\n    h: shape.h * scale\n  } :\n  {\n    x: shape.x * scale,\n    y: (shape.y-6) * scale,\n    radius: shape.radius * scale,\n  }\n);\n\n\nexport const makeEnemyCollisionShapes : {[key : string]: (scale : number) => Array<Box|Circle>}= {\n  [EnemyType.SKULL]: makeSkullShapes,\n  [EnemyType.ENEMY_TWO]: makeEnemyTwoShapes,\n  [EnemyType.MULTI_LASER]: (scale) => [\n    {x: -37 * scale, y: -25 * scale, w: 32 * scale, h: 30 * scale},\n    {x: -5 * scale,  y: -28 * scale, w: 42 * scale, h: 34 * scale},\n    {x: -10 * scale, y: 0, w: 20 * scale, h: 30 * scale},\n    {x: 37 * scale,  y: -5 * scale, w: 5 * scale, h: 13 * scale},\n    {x: -38 * scale, y: 10 * scale, w: 4 * scale, h: 16 * scale},\n    {x: -42 * scale, y: 10 * scale, w: 4 * scale, h: 11 * scale},\n    {x: -46 * scale, y: 5 * scale, w: 4 * scale, h: 10 * scale},\n    {x: -50 * scale, y: 0, w: 10 * scale, h: 4 * scale},\n\n    {x: 37 * scale,  y: -20, radius: 10 * scale},\n    {x: 32 * scale,  y: -14 * scale, radius: 14 * scale},\n    {x: -16 * scale, y: 16 * scale, radius: 14 * scale},\n    {x: 16 * scale,  y: 14 * scale, radius: 12 * scale},\n    {x: -33 * scale, y: -5 * scale, radius: 13 * scale},\n  ],\n  [EnemyType.NAALDLASER]: (scale) => [{x: -5 * scale, y: 40 * scale, w: 10 * scale, h: 30 * scale}]\n}\n","import { EnemyType } from \"./types\";\nimport { Point } from \"../phyz/shapes\";\nimport { EnemyState } from \"../store/enemy-reducer\";\nimport { makeEnemyCollisionShapes } from \"./enemy-collision-shapes\";\nimport { ENEMY_BOUNDS } from \"./enemy-bounding-boxes\";\nimport { FlyBehaviour } from \"./enemy-fly-behaviours\";\nimport { FireType } from \"../store/thing\";\n\nexport interface EnemySpawnParams {\n  type: EnemyType\n  flyBehaviour: FlyBehaviour\n  fireType: FireType\n  health: number\n  scale: number\n  pos: Point\n}\n\nexport const makeEnemy = (p : EnemySpawnParams) : EnemyState => ({\n  enemyType: p.type,\n  fireType: p.fireType,\n  flyBehaviour: p.flyBehaviour,\n  angle: 0,\n  shooting: false,\n  size: {x: ENEMY_BOUNDS[p.type].x * p.scale, y: ENEMY_BOUNDS[p.type].y * p.scale},\n  collisionShapes: makeEnemyCollisionShapes[p.type](p.scale),\n  health: p.health,\n  maxHealth: p.health,\n  pos: p.pos,\n  startPos: p.pos,\n  trajectory: 0,\n  shootTimer: 100\n});\n\n\n/*\nexport const makeEnemy = (type : EnemyType, xPos : number, yPos : number, scale: number, health? : number) : EnemyState => ({\n  enemyType: type,\n  angle: 0, shooting: false,\n  size: {x: ENEMY_BOUNDS[type].x * scale, y: ENEMY_BOUNDS[type].y * scale},\n  collisionShapes: makeEnemyCollisionShapes[type](scale),\n  health: health || 4, maxHealth: health || 4,\n  pos: {y: yPos, x: xPos},\n  startPos: {y: yPos, x: xPos},\n  trajectory: 0,\n  shootTimer: 100\n});\n*/\n","import { Dispatch } from \"redux\";\nimport { ActionTypes } from \"./action-types\";\nimport { PieuwerControl, PieuwerKey, PieuwerState } from \"../store/pieuwer-reducer\";\nimport { EnemyState } from \"../store/enemy-reducer\";\nimport { Point } from \"../phyz/shapes\";\nimport { PieuwerToEnemyCollisions } from \"../phyz/collisions\";\nimport { makeEnemy, EnemySpawnParams } from \"../enemies/enemy-creator\";\nimport { Thing, FireType } from \"../store/thing\";\n\n\n\nconst KeyboardToPlayerControlMap : {[key: string]: PieuwerKey } = {\n  ArrowUp: \"pieuwerOne\",\n  ArrowDown: \"pieuwerOne\",\n  ArrowLeft: \"pieuwerOne\",\n  ArrowRight: \"pieuwerOne\",\n  \"0\": \"pieuwerOne\",\n  w: \"pieuwerTwo\",\n  s: \"pieuwerTwo\",\n  a: \"pieuwerTwo\",\n  d: \"pieuwerTwo\",\n  c: \"pieuwerTwo\"\n};\n\nconst KeyboardToPieuwerControlMap : {[key: string]: PieuwerControl} = {\n  ArrowUp: PieuwerControl.UP,\n  ArrowDown: PieuwerControl.DOWN,\n  ArrowLeft: PieuwerControl.LEFT,\n  ArrowRight: PieuwerControl.RIGHT,\n  \"0\": PieuwerControl.SHOOT,\n  w: PieuwerControl.UP,\n  s: PieuwerControl.DOWN,\n  a: PieuwerControl.LEFT,\n  d: PieuwerControl.RIGHT,\n  c: PieuwerControl.SHOOT\n};\n\nconst GamepadToPieuwerControlMap : {[key: string]: PieuwerControl} = {\n  a: PieuwerControl.SHOOT,\n  up: PieuwerControl.UP,\n  down: PieuwerControl.DOWN,\n  left: PieuwerControl.LEFT,\n  right: PieuwerControl.RIGHT,\n};\n\nexport interface KeyAction  {\n  type: ActionTypes\n  key?: PieuwerControl\n  player: PieuwerKey\n  axisForce?: number\n}\n\nexport interface BulletAction {\n  type: ActionTypes\n  xPos?: number\n  yPos?: number\n  trajectory?: number\n  bulletIdx?: number\n  bulletType?: \"bullets\"|\"enemyBullets\"\n}\n\nexport interface EnemyAction {\n  type: ActionTypes\n  spawn?: EnemyState\n  enemyIdx?: number\n  pieuwerPositions?: Array<Point>\n}\n\nexport interface ExplosionAction {\n  type: ActionTypes,\n  pos: Point\n  size: number\n}\n\nexport interface CollisionAction {\n  type: ActionTypes\n  collisions: PieuwerToEnemyCollisions\n}\n\n\nexport const enemyActionCreator = (dispatch : Dispatch<EnemyAction|BulletAction>) => ({\n  spawnEnemy: (params : EnemySpawnParams) => {\n    dispatch({type: ActionTypes.SPAWN_ENEMY, spawn: makeEnemy(params)})\n  },\n  enemiesReceiveBullet: ({bulletIdx, enemies} : {bulletIdx : number, enemies: Array<number>}) => {\n    enemies.forEach(enemyIdx => {\n      dispatch({type: ActionTypes.ENEMY_RECEIVES_BULLET, enemyIdx: enemyIdx, bulletIdx: bulletIdx});\n    });\n    dispatch({type: ActionTypes.REMOVE_BULLET, bulletType: \"bullets\", bulletIdx: bulletIdx});\n  }\n});\n\nexport const explosionActionCreator = (dispatch : Dispatch<ExplosionAction>) => ({\n  spawnExplosion: (pos : Point, size: number) => {\n    dispatch({type: ActionTypes.SPAWN_EXPLOSION, pos: pos, size: size});\n  }\n})\n\nexport const bulletActionCreator = (dispatch : Dispatch<BulletAction>) => ({\n  spawnBullet: <T extends Thing>(thing : T) =>  {\n    if (thing.shooting && thing.fireType === FireType.BULLET) {\n      const trajectory = (\"enemyType\" in thing ?  (thing.angle + 90) : ((thing.angle * 1.5) - 90)) * (Math.PI / 180);\n      dispatch({\n        type: ActionTypes.SPAWN_BULLET,\n        xPos: thing.pos.x + (Math.cos(trajectory) * thing.size.x / 2),\n        yPos: thing.pos.y + (Math.sin(trajectory) * thing.size.y / 2),\n        trajectory: trajectory,\n        bulletType: \"enemyType\" in thing ? \"enemyBullets\" : \"bullets\"\n      });\n    }\n  }\n});\n\nexport const keyActionCreator = (dispatch : Dispatch<KeyAction>) => ({\n  onKeyDown: (key : string) => dispatch({type: ActionTypes.KEYDOWN, key: KeyboardToPieuwerControlMap[key], player: KeyboardToPlayerControlMap[key]}),\n  onKeyUp: (key : string) => dispatch({type: ActionTypes.KEYUP, key: KeyboardToPieuwerControlMap[key], player: KeyboardToPlayerControlMap[key]}),\n  onGamePadButtonDown: (key : string, player : PieuwerKey) => dispatch({type: ActionTypes.KEYDOWN, key: GamepadToPieuwerControlMap[key], player: player}),\n  onGamePadButtonUp: (key : string, player : PieuwerKey) => dispatch({type: ActionTypes.KEYUP, key: GamepadToPieuwerControlMap[key], player: player}),\n});\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { CollisionAction } from \"../actions/action-creators\";\nimport { PieuwerToEnemyCollisions } from \"../phyz/collisions\";\n\n\n\nexport interface MultiCollisionState {\n  collisions: PieuwerToEnemyCollisions\n}\n\n\nconst initialState : MultiCollisionState  = {\n  collisions: {}\n};\n\n\nexport default function(state : MultiCollisionState, action : CollisionAction) : MultiCollisionState {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.RESET_INITIAL_STATE:\n      return initialState;\n    case ActionTypes.SET_COLLISIONS:\n      return {\n        collisions: action.collisions\n      }\n    case ActionTypes.UPDATE:\n      return {\n        collisions: {}\n      };\n    default:\n      return state;\n  }\n}\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { ExplosionAction } from \"../actions/action-creators\";\nimport { Point } from \"../phyz/shapes\";\n\n\nexport interface ExplosionState {\n  pos: Point\n  size: number,\n  initSize: number\n}\n\nexport interface MultiExplosionState {\n  explosions: Array<ExplosionState>\n}\n\n\nconst initialState : MultiExplosionState  = {\n  explosions: []\n};\n\nconst explode = (explosion : ExplosionState) : ExplosionState => ({\n  ...explosion,\n  size: explosion.size - 1\n});\n\n\nexport default function(state : MultiExplosionState, action : ExplosionAction) : MultiExplosionState {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.RESET_INITIAL_STATE:\n      return initialState;\n    case ActionTypes.SPAWN_EXPLOSION:\n      return {\n        explosions: state.explosions.concat({\n          size: action.size,\n          initSize: action.size,\n          pos: action.pos,\n        })\n      };\n    case ActionTypes.UPDATE:\n      return {\n        explosions: state.explosions\n          .map(explode)\n          .filter(explosion => explosion.size > 0)\n      };\n    default:\n      return state;\n  }\n}\n","import { ActionTypes } from \"../actions/action-types\";\nimport { EnemyAction } from \"../actions/action-creators\";\nimport { VIRT_HEIGHT, VIRT_WIDTH } from \"./constants\";\nimport { Point } from \"../phyz/shapes\";\nimport { EnemyType } from \"../enemies/types\";\nimport { fly, FlyBehaviour } from \"../enemies/enemy-fly-behaviours\";\nimport { Thing } from \"./thing\";\n\nexport interface EnemyState extends Thing {\n  flyBehaviour: FlyBehaviour\n  enemyType: EnemyType\n  startPos: Point\n  trajectory: number\n  shootTimer: number\n}\n\n\nexport interface MultiEnemyState {\n  enemies: Array<EnemyState>\n  spawnCentral: Point\n}\n\nconst initialState : MultiEnemyState =  {\n  enemies: [],\n  spawnCentral: {x: VIRT_WIDTH / 2, y: -(VIRT_HEIGHT / 3)}\n}\n\nexport default function(state : MultiEnemyState, action : EnemyAction) : MultiEnemyState {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.RESET_INITIAL_STATE:\n      return initialState;\n    case ActionTypes.RESET_ENEMY_CENTRAL:\n      return {\n        ...state,\n        spawnCentral: initialState.spawnCentral\n      };\n    case ActionTypes.ENEMY_RECEIVES_BULLET:\n      return {\n        ...state,\n        enemies: state.enemies.map((enemy, idx) => ({\n          ...enemy,\n          health: idx === action.enemyIdx ? enemy.health - 1 : enemy.health\n        }))\n      };\n    case ActionTypes.SPAWN_ENEMY:\n      return {\n        ...state,\n        enemies: state.enemies.concat(action.spawn)\n      };\n      break;\n    case ActionTypes.ENEMY_COLLIDES_WITH_PIEUWER:\n      return {\n        ...state,\n        enemies: state.enemies.map((enemy, idx) => ({\n          ...enemy,\n          health: idx === action.enemyIdx ? enemy.health - 0.04 : enemy.health\n        }))\n      }\n    case ActionTypes.UPDATE:\n      return {\n        ...state,\n        spawnCentral: {\n          x: state.spawnCentral.x,\n          y: state.spawnCentral.y < VIRT_HEIGHT / 2 ? state.spawnCentral.y + 1 : VIRT_HEIGHT / 2\n        },\n        enemies: state.enemies.map(enemy => fly(enemy, state.spawnCentral, action.pieuwerPositions))\n          .filter((enemy) => enemy.health > 0)\n      };\n      break;\n    default:\n      return state;\n  }\n}\n","import { ActionTypes  } from \"../actions/action-types\";\nimport { VIRT_WIDTH, VIRT_HEIGHT } from \"./constants\";\nimport { BulletAction } from \"../actions/action-creators\";\nimport { Point } from \"../phyz/shapes\";\n\n\nexport interface BulletState {\n  trajectory: number\n  pos: Point\n  speed: number\n}\n\nexport interface MultiBulletState {\n  bullets: Array<BulletState>\n  enemyBullets: Array<BulletState>\n}\n\n\nconst initialState : MultiBulletState  = {\n  bullets: [],\n  enemyBullets: []\n};\n\nconst fly = (bullet : BulletState) : BulletState => ({\n  ...bullet,\n  pos: {\n    x: bullet.pos.x + Math.cos(bullet.trajectory) * bullet.speed,\n    y: bullet.pos.y + Math.sin(bullet.trajectory) * bullet.speed\n  }\n});\n\nconst withinBounds = (bullet : BulletState) : boolean  =>\n  bullet.pos.x > 0 && bullet.pos.x < VIRT_WIDTH && bullet.pos.y > 0 && bullet.pos.y < VIRT_HEIGHT;\n\nexport default function(state : MultiBulletState, action : BulletAction) : MultiBulletState {\n  if (typeof state === 'undefined') {\n    return initialState;\n  }\n  switch (action.type) {\n    case ActionTypes.RESET_INITIAL_STATE:\n      return initialState;\n    case ActionTypes.REMOVE_BULLET:\n      return {\n        ...state,\n        [action.bulletType]: state[action.bulletType].filter((bullet, idx) => idx !== action.bulletIdx)\n      };\n    case ActionTypes.SPAWN_BULLET:\n      return {\n        ...state,\n        [action.bulletType]: state[action.bulletType].concat({\n          pos: { x: action.xPos, y: action.yPos },\n          trajectory: action.trajectory,\n          speed: action.bulletType === \"enemyBullets\" ? 4 : 10\n        })\n      };\n    case ActionTypes.UPDATE:\n      return {\n        enemyBullets: state.enemyBullets.map(fly).filter(withinBounds),\n        bullets: state.bullets.map(fly).filter(withinBounds)\n      };\n    default:\n      return state;\n  }\n}\n","export const guardNumber = (newNum : number, maxNum : number, minNum : number) : number =>\n  newNum > maxNum ? maxNum  : newNum < minNum ? minNum : newNum;\n","import pieuwerReducer, { MultiPieuwerState } from \"./pieuwer-reducer\";\nimport bulletReducer, { MultiBulletState } from \"./bullet-reducer\";\nimport enemyReducer, { MultiEnemyState } from \"./enemy-reducer\";\nimport explosionReducer, { MultiExplosionState } from \"./explosion-reducer\";\nimport collisionReducer, { MultiCollisionState } from \"./collision-reducer\";\n\nexport default {\n  pieuwerStates: pieuwerReducer,\n  bulletStates: bulletReducer,\n  explosionStates: explosionReducer,\n  enemyStates: enemyReducer,\n  collisionStates: collisionReducer\n}\n\nexport interface GameState {\n  pieuwerStates: MultiPieuwerState\n  bulletStates: MultiBulletState\n  explosionStates: MultiExplosionState\n  enemyStates: MultiEnemyState\n  collisionStates: MultiCollisionState\n}\n","import { EnemyType } from \"./types\";\n\nconst skullPng = new Image();\nskullPng.src = \"./img/enemy.png\";\nconst enemy2Png = new Image();\nenemy2Png.src = \"./img/enemy2.png\";\n\nconst multiLaserPng = new Image();\nmultiLaserPng.src = \"./img/enemy3.png\";\n\nconst naaldLaserPng = new Image();\nnaaldLaserPng.src = \"./img/dlnv.png\"\n\nexport const enemySprites : {[key : string]: HTMLImageElement}= {\n  [EnemyType.SKULL]: skullPng,\n  [EnemyType.ENEMY_TWO]: enemy2Png,\n  [EnemyType.MULTI_LASER]: multiLaserPng,\n  [EnemyType.NAALDLASER]: naaldLaserPng\n}\n","import { BulletState } from \"./store/bullet-reducer\";\nimport { Drawable } from \"./resizable-canvas/drawable\";\nimport { PieuwerState, PieuwerKey } from \"./store/pieuwer-reducer\";\nimport { EnemyState } from \"./store/enemy-reducer\";\nimport { ExplosionState } from \"./store/explosion-reducer\";\nimport { isBox, Box, Circle, Point } from \"./phyz/shapes\";\nimport { VIRT_HEIGHT } from \"./store/constants\";\nimport { rotateBoxAroundOrigin, translateToOrigin, rotateAroundOrigin } from \"./phyz/shape-ops\";\nimport { CollisionList } from \"./phyz/collisions\";\nimport { EnemyType } from \"./enemies/types\";\nimport { ENEMY_BOUNDS } from \"./enemies/enemy-bounding-boxes\";\nimport { enemySprites } from \"./enemies/enemy-sprites\";\nimport { Thing, FireType } from \"./store/thing\";\n\n\nconst pieuwerOnePng = new Image();\npieuwerOnePng.src = \"./img/pieuwerOne.png\";\nconst pieuwerTwoPng = new Image();\npieuwerTwoPng.src = \"./img/pieuwerTwo.png\";\n\n\nconst pieuwerPngs : {[key : string] : HTMLImageElement} = {\n  pieuwerOne: pieuwerOnePng,\n  pieuwerTwo: pieuwerTwoPng\n};\n\nexport function preload(callback : () => void) {\n  if (pieuwerOnePng.complete && \n    Object.keys(enemySprites).map(key => enemySprites[key].complete).indexOf(false) < 0) {\n    callback();\n  } else {\n    setTimeout(() => preload(callback), 1);\n  }\n}\n\n\nconst drawCollisionShapes = (ctx: CanvasRenderingContext2D, scale: number, collisionShapes : Array<Circle|Box>) => {\n  ctx.strokeStyle = \"white\"\n  collisionShapes.forEach(shape => {\n    if (isBox(shape)) {\n      ctx.strokeRect(shape.x * scale, shape.y * scale, (<Box>shape).w * scale, (<Box>shape).h * scale);\n    } else {\n      ctx.beginPath();\n      ctx.arc(shape.x * scale, shape.y * scale, (<Circle>shape).radius * scale, 0, Math.PI*2);\n      ctx.stroke();\n    }\n  });\n}\n\nconst imgCache : {[key : string]: HTMLCanvasElement}= {};\n\nconst getImage = (img : HTMLImageElement, imgDims: Point, targetRect: Point) : HTMLCanvasElement => {\n  const imgKey = `${img.src}-${targetRect.x}-${targetRect.y}`;\n  if (!(imgKey in imgCache)) {\n    imgCache[imgKey] = document.createElement(\"canvas\");\n    imgCache[imgKey].width = targetRect.x;\n    imgCache[imgKey].height = targetRect.y;\n    imgCache[imgKey].getContext('2d').drawImage(\n      img, 0, 0, imgDims.x, imgDims.y,\n      0, 0, targetRect.x, targetRect.y\n    );\n  }\n  return imgCache[imgKey];\n}\n\nconst drawThing = <T extends Thing>(thing : T, img : HTMLImageElement, imgDims : Point) : Drawable =>\n  (ctx: CanvasRenderingContext2D, scale: number) => {\n    const isEnemy = \"enemyType\" in thing;\n    ctx.save();\n    ctx.translate(Math.floor(thing.pos.x * scale), Math.floor(thing.pos.y * scale));\n    const health = thing.health / thing.maxHealth;\n    const healthBarWidth = isEnemy ? thing.size.x * scale : thing.size.x * scale * 0.25;\n\n    ctx.fillStyle = \"rgba(255,0,0,0.8)\";\n    ctx.fillRect(-(thing.size.x / 2)*scale, -((thing.size.y / 2) + 15) * scale, healthBarWidth, 5 * scale);\n\n    ctx.fillStyle = \"rgb(96,255,96)\";\n    ctx.fillRect(-(thing.size.x / 2)*scale, -((thing.size.y / 2) + 15) * scale, healthBarWidth * health, 5 * scale);\n\n    ctx.rotate(thing.angle * Math.PI / 180);\n    ctx.drawImage(getImage(img, imgDims, {x:Math.ceil(thing.size.x * scale) ,y: Math.ceil(thing.size.y * scale)}),\n      Math.floor(-(thing.size.x / 2)*scale),\n      Math.floor(-(thing.size.y / 2)*scale));\n      // drawCollisionShapes(ctx, scale, thing.collisionShapes);\n    ctx.restore();\n    if (isEnemy && thing.fireType === FireType.LASER) {\n\n      ctx.fillStyle = \"rgba(255,255,0,0.8)\";\n      if (thing.shooting) {\n        ctx.fillRect(\n          Math.floor((thing.pos.x - Math.random() * 4) * scale),\n          Math.floor((thing.pos.y + thing.size.y / 2) * scale),\n          Math.ceil(Math.random() * 4 * scale),\n          Math.ceil((VIRT_HEIGHT - (thing.pos.y + thing.size.y / 2))  * scale)\n        );\n      } else {\n        ctx.beginPath();\n        ctx.arc(\n          Math.floor((thing.pos.x - Math.random() * 4) * scale),\n          Math.floor((thing.pos.y + thing.size.y / 2) * scale),\n          Math.random() * (400-thing.shootTimer) / 4 * scale, 0, Math.PI*2);\n        ctx.fill();\n      }\n    }\n  };\n\nexport const drawPieuwer = (pieuwerKey : PieuwerKey, ps : PieuwerState) : Drawable =>\n    drawThing(ps, pieuwerPngs[pieuwerKey], ps.size);\n\nexport const drawEnemy = (enemy : EnemyState) : Drawable =>\n    drawThing(enemy, enemySprites[enemy.enemyType], ENEMY_BOUNDS[enemy.enemyType]);\n\n\nexport const drawCollisions = (thing : Thing, collisions: Array<CollisionList>) : Drawable =>\n  (ctx: CanvasRenderingContext2D, scale: number) => {\n    ctx.fillStyle = \"rgba(255, 255, 255, 0.8)\";\n    collisions.forEach((collisionList) => {\n      collisionList.forEach(({shapeIndex, collidingCorners}) => {\n        const shape = thing.collisionShapes[shapeIndex];\n        if (isBox(shape)) {\n          const points = rotateBoxAroundOrigin(<Box>shape, (thing.angle+180) * Math.PI / 180);\n          collidingCorners.forEach(pointIndex => {\n            const tl = translateToOrigin(thing.pos, points[pointIndex]);\n            ctx.beginPath();\n            ctx.arc(\n              tl.x * scale,\n              tl.y * scale,\n              Math.random() * 20 * scale, 0, Math.PI*2);\n            ctx.fill();\n          })\n        } else {\n          const tl = translateToOrigin(thing.pos, rotateAroundOrigin(shape, (thing.angle+180) * Math.PI / 180));\n          ctx.beginPath();\n          ctx.arc(\n            (tl.x + (<Circle> shape).radius * Math.random() * 2 - (<Circle> shape).radius) * scale,\n            (tl.y + (<Circle> shape).radius * Math.random() * 2 - (<Circle> shape).radius) * scale,\n            Math.random() * 20 * scale, 0, Math.PI*2\n          );\n          ctx.fill();\n        }\n      })\n    })\n  }\n\nexport const drawBullet = (bs : BulletState) : Drawable =>\n  (ctx: CanvasRenderingContext2D, scale: number) => {\n      ctx.beginPath();\n      ctx.fillStyle = `rgb(255,255,255)`;\n      ctx.arc(\n        Math.floor(bs.pos.x * scale),\n        Math.floor(bs.pos.y * scale),\n        Math.ceil(3 * scale), 0, Math.PI*2\n      );\n      ctx.fill();\n    };\n\nexport const drawExplosion = (explosion : ExplosionState) =>\n  (ctx: CanvasRenderingContext2D, scale: number) => {\n    ctx.beginPath();\n    ctx.fillStyle = `rgba(255,255,255, ${0.5 + ((explosion.size / explosion.initSize) * 0.5)})`;\n    ctx.arc(\n      Math.floor(explosion.pos.x * scale),\n      Math.floor(explosion.pos.y * scale),\n      Math.ceil(5 * scale * (explosion.initSize - explosion.size)),\n      0, Math.PI*2\n    );\n    ctx.fill();\n  };\n","type ScaledEventListener = (ev : Event) => (ev : Event, scale : number) => any;\n\ninterface ScaledEventRegistryEntry {\n  elem: HTMLElement|Window,\n  eventName: string,\n  fn : ScaledEventListener\n};\n\nexport default function() {\n\tlet scale : number;\n\tlet registered : Array<ScaledEventRegistryEntry> = [];\n\n\treturn {\n\t\tonResize(s : number) {\n\t\t\tscale = s;\n\t\t},\n\t\tadd(eventName : string, onEvent : (ev : Event, scale : number) => any, elem : HTMLElement|Window = window) {\n\t\t\tconst fn : ScaledEventListener = (ev : Event) => onEvent(ev, scale);\n\n\t\t\tregistered.push({\n\t\t\t\telem: elem,\n\t\t\t\teventName: eventName,\n\t\t\t\tfn: fn\n\t\t\t});\n\n\t\t\telem.addEventListener(eventName, fn);\n\t\t},\n\t\tclear() {\n\t\t\tregistered.forEach(({elem, eventName, fn}) =>\n\t\t\t\telem.removeEventListener(eventName, fn)\n\t\t\t)\n\t\t}\n\t}\n};\n","export default function(vWidth : number, vHeight : number, listeners : Array<(scale : number, width : number, height : number) => any>) {\n\tconst aspectRatio = vHeight / vWidth;\n\n\tfunction invokeListeners(width : number, height : number, scale : number) {\n\t\tlisteners.forEach(listener =>\tlistener(scale, width, height));\n\t}\n\n\tfunction onResize() {\n\t\tconst { innerWidth, innerHeight } = window;\n\t\tif (innerWidth * aspectRatio > innerHeight) {\n\t\t\tinvokeListeners(Math.floor(innerHeight / aspectRatio), innerHeight, (innerHeight / aspectRatio) / vWidth)\n\t\t} else {\n\t\t\tinvokeListeners(innerWidth, Math.floor(innerWidth * aspectRatio), innerWidth / vWidth)\n\t\t}\n\t}\n\n\tonResize();\n\twindow.addEventListener(\"resize\", onResize);\n}\n","export default (canvases : Array<HTMLCanvasElement>, ...listeners : Array<(scale : number) => void>) => {\n\tfunction rescaleGame(scale : number, width : number, height : number) {\n\t\tcanvases.forEach(canvas => {\n\t\t\tcanvas.style.left = `${Math.floor((window.innerWidth - width) / 2)}px`;\n\t\t\tcanvas.style.top = `${Math.floor((window.innerHeight - height) / 2)}px`;\n\t\t\tcanvas.width = width;\n\t\t\tcanvas.height = height;\n\t\t});\n\t}\n\n\treturn [rescaleGame].concat(listeners);\n};\n","import {Drawable} from \"./drawable\";\n\nexport default function(ctx : CanvasRenderingContext2D, can : HTMLCanvasElement) {\n\tlet scale : number;\n\tlet clearRequested : boolean = false;\n\treturn {\n\t\tonResize(s : number) {\n\t\t\tscale = s;\n\t\t},\n\t\tclear() {\n\t\t\tclearRequested = true;\n\t\t},\n\t\trender(drawables : Array<Drawable>) {\n\t\t\tif (clearRequested) {\n\t\t\t\tctx.clearRect(0, 0, can.width, can.height);\n\t\t\t\tclearRequested = false;\n\t\t\t}\n\t\t\tdrawables.forEach(draw => draw(ctx, scale));\n\t\t}\n\t}\n}\n","/*\nconst padEvents = initPadEvents();\nconsole.log(padEvents);\n\nObject.keys(padEvents).forEach((cur) => {\n  window.addEventListener(`gamepad-${cur}-pressed`, (ev) => {\n    console.log(`Controller ${ev.detail.controllerIndex} pressed: ${cur}`)\n    console.log(JSON.stringify(controllers[0].buttons.map(b => b.pressed)))\n  });\n  window.addEventListener(`gamepad-${cur}-released`, (ev) =>\n    console.log(`Controller ${ev.detail.controllerIndex} released: ${cur}`));\n});\n*/\nconst initPadEvents = (\n  onUnmappedButton = (i : string) => console.warn(\"unmapped button index\", i),\n  axisMappings :{[key:string] : [string, number]} = {\n    \"0\": [\"l-axis\", 0],\n    \"1\": [\"l-axis\", 1],\n    \"2\": [\"r-axis\", 0],\n    \"3\": [\"r-axis\", 1],\n    \"4\": [\"l-axis\", 0],\n    \"5\": [\"l-axis\", 1],\n    \"6\": [\"r-axis\", 0],\n    \"7\": [\"r-axis\", 1]\n  },\n  defaultMappings = {\n    \"0\": \"x\",\n    \"1\": \"a\",\n    \"2\": \"b\",\n    \"3\": \"y\",\n    \"9\": \"start\",\n    \"8\": \"select\",\n    \"5\": \"rt-shoulder\",\n    \"7\": \"rb-shoulder\",\n    \"4\": \"lt-shoulder\",\n    \"6\": \"lb-shoulder\",\n    \"10\": \"l-axis\",\n    \"11\": \"r-axis\",\n    \"12\": \"up\",\n    \"13\": \"down\",\n    \"14\": \"left\",\n    \"15\": \"right\"}) => {\n\n  const padEvents : {[key : string] : {pressed:string, released:string}} = [\n    \"a\", \"b\", \"x\", \"y\",\n    \"start\", \"select\", \"up\", \"down\", \"left\", \"right\",\n    \"rt-shoulder\", \"rb-shoulder\",\n    \"lt-shoulder\", \"lb-shoulder\",\n    \"l-axis\", \"r-axis\"\n  ].reduce((acc : {[key : string] : {pressed:string, released:string}}, cur :string) => {\n      acc[cur] = {\n        pressed: `gamepad-${cur}-pressed`,\n        released: `gamepad-${cur}-released`\n      };\n      return acc;\n  }, {});\n\n  let controllers : {[key:string] : any} = {};\n  let keymaps : {[key:string] : {[key:string] : string}}= {};\n  let buttonstates : {[key:string] : {[key:string] : boolean}} = {};\n  let axisStates : {[key:string] : Array<number> } = {};\n  let axisCalibrations : {[key:string] : Array<number> } = {};\n\n  const initButtonStates = (keymap : {[key:string]:string}) : {[key:string] : boolean} =>\n    Object.keys(keymap).reduce((acc:  {[key : string] : boolean}, cur : string) => {\n      acc[keymap[cur]] = false;\n      return acc;\n    }, {});\n\n  const roundOffAxisValue = (axis : number) : number =>\n    Math.round(axis * 100);\n\n  const calibrateAxisValue = (axis : number, calib : number) : number => {\n    if (axis === 1.0) { return 100; }\n    if (axis === -1.0) { return -100; }\n    const rounded = roundOffAxisValue(axis) - calib;\n    if (rounded < 20 && rounded > -20) { return 0; }\n    return rounded < 0 ? -50 : 50;\n  }\n\n  const registerController = (ev : any) => {\n    controllers[ev.gamepad.index] = ev.gamepad;\n    keymaps[ev.gamepad.index] = {...defaultMappings};\n    buttonstates[ev.gamepad.index] = initButtonStates(keymaps[ev.gamepad.index]);\n    axisStates[ev.gamepad.index] = ev.gamepad.axes.map((axis:number) => roundOffAxisValue(axis));\n    axisCalibrations[ev.gamepad.index] = [];\n  }\n\n  const removeController : (ev : any) => void = ({gamepad}) => {\n    delete controllers[gamepad.index];\n    delete keymaps[gamepad.index];\n    delete buttonstates[gamepad.index];\n    delete axisStates[gamepad.index];\n    delete axisCalibrations[gamepad.index];\n  }\n\n  function dispatchPadEvents() {\n    for (let idx in controllers) {\n      const controller = controllers[idx];\n      if (axisCalibrations[idx].length === 0) {\n        axisCalibrations[idx] = controller.axes.map((axis:number) => roundOffAxisValue(axis))\n        axisStates[idx] = controller.axes.map((axis : number, j : number) =>\n          calibrateAxisValue(axis,  axisCalibrations[idx][j]));\n      }\n\n\n      for (let i in controller.axes) {\n        const current = calibrateAxisValue(controller.axes[i],  axisCalibrations[idx][parseInt(i)]);\n        if (current !== axisStates[idx][parseInt(i)]) {\n          const axName:string = axisMappings[i][0];\n          const dir:number = axisMappings[i][1];\n          if (dir === 0) {\n            window.dispatchEvent(new CustomEvent(\n              `gamepad-${axName}-x-change`, { detail: {\n                  controllerIndex: idx,\n                  force: current,\n                  measured: controller.axes[i],\n                  rounded: roundOffAxisValue(controller.axes[i])\n                }\n              })\n            );\n          } else {\n            window.dispatchEvent(new CustomEvent(\n              `gamepad-${axName}-y-change`,\n                { detail: {\n                  controllerIndex: idx,\n                  force: current,\n                  measured: controller.axes[i],\n                  rounded: roundOffAxisValue(controller.axes[i])\n                }}\n            ));\n          }\n          axisStates[idx][parseInt(i)] = current;\n\n        }\n      }\n\n\n      for (let i in controller.buttons) {\n        const { pressed } = controller.buttons[i];\n        const buttonMapping = keymaps[idx][i];\n\n        if (buttonMapping && buttonstates[idx][buttonMapping] !== pressed) {\n          buttonstates[idx][buttonMapping] = pressed;\n          window.dispatchEvent(new CustomEvent(\n            padEvents[buttonMapping][pressed ? \"pressed\" : \"released\"],\n            {detail: {controllerIndex: idx}}\n          ));\n        }\n\n        if (onUnmappedButton && pressed && !buttonMapping) {\n          onUnmappedButton(i);\n        }\n      }\n    }\n    requestAnimationFrame(dispatchPadEvents);\n  }\n\n  dispatchPadEvents();\n\n  function scangamepads() {\n    var gamepads = (<any>navigator).getGamepads ? (<any>navigator).getGamepads() : ((<any>navigator).webkitGetGamepads ? (<any>navigator).webkitGetGamepads() : []);\n    for (var i = 0; i < gamepads.length; i++) {\n      if (gamepads[i]) {\n        if (!(gamepads[i].index in controllers)) {\n          registerController({gamepad: gamepads[i]});\n        }\n      }\n    }\n  }\n  const haveEvents = 'ongamepadconnected' in window;\n  if (!haveEvents) {\n    setInterval(scangamepads, 50);\n  }\n\n  window.addEventListener(\"gamepadconnected\", registerController);\n  window.addEventListener(\"gamepaddisconnected\", removeController);\n  return Object.keys(padEvents)\n  .map(x => [`gamepad-${x}-pressed`, `gamepad-${x}-released`])\n  .reduce((a,b) => a.concat(b))\n  .concat([\n    \"gamepad-l-axis-x-change\", \"gamepad-l-axis-y-change\",\n    \"gamepad-r-axis-x-change\", \"gamepad-r-axis-y-change\"\n  ]);\n}\n\nexport { initPadEvents }\n","module.exports = function(originalModule) {\n\tif (!originalModule.webpackPolyfill) {\n\t\tvar module = Object.create(originalModule);\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"exports\", {\n\t\t\tenumerable: true\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","import $$observable from 'symbol-observable';\n\n/**\n * These are private action types reserved by Redux.\n * For any unknown actions, you must return the current state.\n * If the current state is undefined, you must return the initial state.\n * Do not reference these action types directly in your code.\n */\nvar ActionTypes = {\n  INIT: '@@redux/INIT' + Math.random().toString(36).substring(7).split('').join('.'),\n  REPLACE: '@@redux/REPLACE' + Math.random().toString(36).substring(7).split('').join('.')\n};\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nvar _extends = Object.assign || function (target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i];\n\n    for (var key in source) {\n      if (Object.prototype.hasOwnProperty.call(source, key)) {\n        target[key] = source[key];\n      }\n    }\n  }\n\n  return target;\n};\n\n/**\n * @param {any} obj The object to inspect.\n * @returns {boolean} True if the argument appears to be a plain object.\n */\nfunction isPlainObject(obj) {\n  if ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object' || obj === null) return false;\n\n  var proto = obj;\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\n/**\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\nfunction createStore(reducer, preloadedState, enhancer) {\n  var _ref2;\n\n  if (typeof preloadedState === 'function' && typeof enhancer === 'undefined') {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (typeof enhancer !== 'undefined') {\n    if (typeof enhancer !== 'function') {\n      throw new Error('Expected the enhancer to be a function.');\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (typeof reducer !== 'function') {\n    throw new Error('Expected the reducer to be a function.');\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n\n  /**\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n  function getState() {\n    if (isDispatching) {\n      throw new Error('You may not call store.getState() while the reducer is executing. ' + 'The reducer has already received the state as an argument. ' + 'Pass it down from the top reducer instead of reading it from the store.');\n    }\n\n    return currentState;\n  }\n\n  /**\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n  function subscribe(listener) {\n    if (typeof listener !== 'function') {\n      throw new Error('Expected the listener to be a function.');\n    }\n\n    if (isDispatching) {\n      throw new Error('You may not call store.subscribe() while the reducer is executing. ' + 'If you would like to be notified after the store has been updated, subscribe from a ' + 'component and invoke store.getState() in the callback to access the latest state. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n    }\n\n    var isSubscribed = true;\n\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      if (isDispatching) {\n        throw new Error('You may not unsubscribe from a store listener while the reducer is executing. ' + 'See https://redux.js.org/api-reference/store#subscribe(listener) for more details.');\n      }\n\n      isSubscribed = false;\n\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing “what changed”. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n  function dispatch(action) {\n    if (!isPlainObject(action)) {\n      throw new Error('Actions must be plain objects. ' + 'Use custom middleware for async actions.');\n    }\n\n    if (typeof action.type === 'undefined') {\n      throw new Error('Actions may not have an undefined \"type\" property. ' + 'Have you misspelled a constant?');\n    }\n\n    if (isDispatching) {\n      throw new Error('Reducers may not dispatch actions.');\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n  function replaceReducer(nextReducer) {\n    if (typeof nextReducer !== 'function') {\n      throw new Error('Expected the nextReducer to be a function.');\n    }\n\n    currentReducer = nextReducer;\n    dispatch({ type: ActionTypes.REPLACE });\n  }\n\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n  function observable() {\n    var _ref;\n\n    var outerSubscribe = subscribe;\n    return _ref = {\n      /**\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if ((typeof observer === 'undefined' ? 'undefined' : _typeof(observer)) !== 'object' || observer === null) {\n          throw new TypeError('Expected the observer to be an object.');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return { unsubscribe: unsubscribe };\n      }\n    }, _ref[$$observable] = function () {\n      return this;\n    }, _ref;\n  }\n\n  // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n  dispatch({ type: ActionTypes.INIT });\n\n  return _ref2 = {\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, _ref2[$$observable] = observable, _ref2;\n}\n\n/**\n * Prints a warning in the console if it exists.\n *\n * @param {String} message The warning message.\n * @returns {void}\n */\nfunction warning(message) {\n  /* eslint-disable no-console */\n  if (typeof console !== 'undefined' && typeof console.error === 'function') {\n    console.error(message);\n  }\n  /* eslint-enable no-console */\n  try {\n    // This error was thrown as a convenience so that if you enable\n    // \"break on all exceptions\" in your console,\n    // it would pause the execution at this line.\n    throw new Error(message);\n  } catch (e) {} // eslint-disable-line no-empty\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionDescription = actionType && 'action \"' + String(actionType) + '\"' || 'an action';\n\n  return 'Given ' + actionDescription + ', reducer \"' + key + '\" returned undefined. ' + 'To ignore an action, you must explicitly return the previous state. ' + 'If you want this reducer to hold no value, you can return null instead of undefined.';\n}\n\nfunction getUnexpectedStateShapeWarningMessage(inputState, reducers, action, unexpectedKeyCache) {\n  var reducerKeys = Object.keys(reducers);\n  var argumentName = action && action.type === ActionTypes.INIT ? 'preloadedState argument passed to createStore' : 'previous state received by the reducer';\n\n  if (reducerKeys.length === 0) {\n    return 'Store does not have a valid reducer. Make sure the argument passed ' + 'to combineReducers is an object whose values are reducers.';\n  }\n\n  if (!isPlainObject(inputState)) {\n    return 'The ' + argumentName + ' has unexpected type of \"' + {}.toString.call(inputState).match(/\\s([a-z|A-Z]+)/)[1] + '\". Expected argument to be an object with the following ' + ('keys: \"' + reducerKeys.join('\", \"') + '\"');\n  }\n\n  var unexpectedKeys = Object.keys(inputState).filter(function (key) {\n    return !reducers.hasOwnProperty(key) && !unexpectedKeyCache[key];\n  });\n\n  unexpectedKeys.forEach(function (key) {\n    unexpectedKeyCache[key] = true;\n  });\n\n  if (action && action.type === ActionTypes.REPLACE) return;\n\n  if (unexpectedKeys.length > 0) {\n    return 'Unexpected ' + (unexpectedKeys.length > 1 ? 'keys' : 'key') + ' ' + ('\"' + unexpectedKeys.join('\", \"') + '\" found in ' + argumentName + '. ') + 'Expected to find one of the known reducer keys instead: ' + ('\"' + reducerKeys.join('\", \"') + '\". Unexpected keys will be ignored.');\n  }\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, { type: ActionTypes.INIT });\n\n    if (typeof initialState === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined during initialization. ' + 'If the state passed to the reducer is undefined, you must ' + 'explicitly return the initial state. The initial state may ' + 'not be undefined. If you don\\'t want to set a value for this reducer, ' + 'you can use null instead of undefined.');\n    }\n\n    var type = '@@redux/PROBE_UNKNOWN_ACTION_' + Math.random().toString(36).substring(7).split('').join('.');\n    if (typeof reducer(undefined, { type: type }) === 'undefined') {\n      throw new Error('Reducer \"' + key + '\" returned undefined when probed with a random type. ' + ('Don\\'t try to handle ' + ActionTypes.INIT + ' or other actions in \"redux/*\" ') + 'namespace. They are considered private. Instead, you must return the ' + 'current state for any unknown actions, unless it is undefined, ' + 'in which case you must return the initial state, regardless of the ' + 'action type. The initial state may not be undefined, but can be null.');\n    }\n  });\n}\n\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (process.env.NODE_ENV !== 'production') {\n      if (typeof reducers[key] === 'undefined') {\n        warning('No reducer provided for key \"' + key + '\"');\n      }\n    }\n\n    if (typeof reducers[key] === 'function') {\n      finalReducers[key] = reducers[key];\n    }\n  }\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var unexpectedKeyCache = void 0;\n  if (process.env.NODE_ENV !== 'production') {\n    unexpectedKeyCache = {};\n  }\n\n  var shapeAssertionError = void 0;\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments[1];\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      var warningMessage = getUnexpectedStateShapeWarningMessage(state, finalReducers, action, unexpectedKeyCache);\n      if (warningMessage) {\n        warning(warningMessage);\n      }\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n      if (typeof nextStateForKey === 'undefined') {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction bindActionCreator(actionCreator, dispatch) {\n  return function () {\n    return dispatch(actionCreator.apply(this, arguments));\n  };\n}\n\n/**\n * Turns an object whose values are action creators, into an object with the\n * same keys, but with every function wrapped into a `dispatch` call so they\n * may be invoked directly. This is just a convenience method, as you can call\n * `store.dispatch(MyActionCreators.doSomething())` yourself just fine.\n *\n * For convenience, you can also pass a single function as the first argument,\n * and get a function in return.\n *\n * @param {Function|Object} actionCreators An object whose values are action\n * creator functions. One handy way to obtain it is to use ES6 `import * as`\n * syntax. You may also pass a single function.\n *\n * @param {Function} dispatch The `dispatch` function available on your Redux\n * store.\n *\n * @returns {Function|Object} The object mimicking the original object, but with\n * every action creator wrapped into the `dispatch` call. If you passed a\n * function as `actionCreators`, the return value will also be a single\n * function.\n */\nfunction bindActionCreators(actionCreators, dispatch) {\n  if (typeof actionCreators === 'function') {\n    return bindActionCreator(actionCreators, dispatch);\n  }\n\n  if ((typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) !== 'object' || actionCreators === null) {\n    throw new Error('bindActionCreators expected an object or a function, instead received ' + (actionCreators === null ? 'null' : typeof actionCreators === 'undefined' ? 'undefined' : _typeof(actionCreators)) + '. ' + 'Did you write \"import ActionCreators from\" instead of \"import * as ActionCreators from\"?');\n  }\n\n  var keys = Object.keys(actionCreators);\n  var boundActionCreators = {};\n  for (var i = 0; i < keys.length; i++) {\n    var key = keys[i];\n    var actionCreator = actionCreators[key];\n    if (typeof actionCreator === 'function') {\n      boundActionCreators[key] = bindActionCreator(actionCreator, dispatch);\n    }\n  }\n  return boundActionCreators;\n}\n\n/**\n * Composes single-argument functions from right to left. The rightmost\n * function can take multiple arguments as it provides the signature for\n * the resulting composite function.\n *\n * @param {...Function} funcs The functions to compose.\n * @returns {Function} A function obtained by composing the argument functions\n * from right to left. For example, compose(f, g, h) is identical to doing\n * (...args) => f(g(h(...args))).\n */\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(undefined, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function () {\n      for (var _len2 = arguments.length, args = Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n\n      var store = createStore.apply(undefined, args);\n      var _dispatch = function dispatch() {\n        throw new Error('Dispatching while constructing your middleware is not allowed. ' + 'Other middleware would not be applied to this dispatch.');\n      };\n\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch() {\n          return _dispatch.apply(undefined, arguments);\n        }\n      };\n      var chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(undefined, chain)(store.dispatch);\n\n      return _extends({}, store, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\n/*\n * This is a dummy function to check if the function name has been altered by minification.\n * If the function has been minified and NODE_ENV !== 'production', warn the user.\n */\nfunction isCrushed() {}\n\nif (process.env.NODE_ENV !== 'production' && typeof isCrushed.name === 'string' && isCrushed.name !== 'isCrushed') {\n  warning(\"You are currently using minified code outside of NODE_ENV === 'production'. \" + 'This means that you are running a slower development build of Redux. ' + 'You can use loose-envify (https://github.com/zertosh/loose-envify) for browserify ' + 'or DefinePlugin for webpack (http://stackoverflow.com/questions/30030031) ' + 'to ensure you have the correct code for your production build.');\n}\n\nexport { createStore, combineReducers, bindActionCreators, applyMiddleware, compose, ActionTypes as __DO_NOT_USE__ActionTypes };\n","import { createStore, combineReducers  } from 'redux';\nimport { initPadEvents } from \"./padevents\";\n\nimport getFrameRenderer from \"./resizable-canvas/frame-renderer\";\nimport getResizeListeners from \"./resizable-canvas/resize-listeners\";\nimport initViewPort from \"./resizable-canvas/viewport\";\nimport getEventListeners from './resizable-canvas/event-listeners';\nimport { preload, drawPieuwer, drawBullet, drawEnemy, drawExplosion, drawCollisions } from './draw';\n\nimport reducers from './store/reducers';\nimport { VIRT_HEIGHT, VIRT_WIDTH } from './store/constants';\n\nimport { keyActionCreator, bulletActionCreator, enemyActionCreator, explosionActionCreator } from './actions/action-creators';\nimport { ActionTypes } from './actions/action-types';\n\nimport { Point } from './phyz/shapes';\nimport { detectBulletToEnemyCollisions, detectPieuwerToEnemyCollisions, PieuwerToEnemyCollisions, detectEnemyBulletToPieuwerCollisions, detectEnemyLaserToPieuwerCollisions } from './phyz/collisions';\nimport { level1, Level } from './levels';\n\nconst store = createStore(combineReducers(reducers));\n\nconst { onKeyUp, onKeyDown, onGamePadButtonUp, onGamePadButtonDown } = keyActionCreator(store.dispatch);\nconst { spawnBullet } = bulletActionCreator(store.dispatch);\nconst { spawnEnemy, enemiesReceiveBullet } = enemyActionCreator(store.dispatch);\nconst { spawnExplosion } = explosionActionCreator(store.dispatch);\n\nconst mainLayer = document.getElementById(\"main-layer\");\nif (!(mainLayer instanceof HTMLCanvasElement)) { throw new TypeError(\"wrong element type\"); }\nconst mainLayerCtx = mainLayer.getContext(\"2d\");\nconst mainFrameRenderer = getFrameRenderer(mainLayerCtx, mainLayer);\n\nconst levelplaat = document.getElementById(\"levelplaat\");\n\nlet gamePadToPlayerMap : {[key : string] : \"pieuwerOne\"|\"pieuwerTwo\"} = {\n  \"0\": \"pieuwerOne\", \"1\": \"pieuwerTwo\"\n};\ninitPadEvents();\n\nconst eventListeners = getEventListeners();\n\ninitViewPort(VIRT_WIDTH, VIRT_HEIGHT, getResizeListeners([mainLayer],\n  eventListeners.onResize,\n  mainFrameRenderer.onResize,\n  () => {\n    levelplaat.style.width = window.innerWidth + \"px\";\n    levelplaat.style.top = -(levelplaat.clientHeight - window.innerHeight) + \"px\";\n  }\n));\n\nconst handleBulletEnemyCollision = (params : {bulletIdx : number, enemies: Array<number>, collsionPos : Point}) => {\n  enemiesReceiveBullet(params);\n  spawnExplosion(params.collsionPos, 8);\n}\n\nconst handleBulletPieuwerCollision = (params : { bulletIdx : number, pieuwerKeys : Array<string>, collsionPos : Point}) => {\n  store.dispatch({type: ActionTypes.REMOVE_BULLET, bulletType: \"enemyBullets\", bulletIdx: params.bulletIdx})\n  params.pieuwerKeys.forEach(pieuwerKey => {\n    store.dispatch({type: ActionTypes.PIEUWER_COLLIDES, player: pieuwerKey});\n  });\n  spawnExplosion(params.collsionPos, 6);\n}\n\nconst handlePieuwerToEnemyCollisions = (collisions : PieuwerToEnemyCollisions) => {\n  Object.keys(collisions).filter(pieuwerKey => collisions[pieuwerKey].length > 0)\n    .forEach(pieuwerKey => store.dispatch({type: ActionTypes.PIEUWER_COLLIDES, player: pieuwerKey}));\n\n  Object.keys(collisions).filter(pieuwerKey => collisions[pieuwerKey].length > 0)\n    .map(pk => collisions[pk]).reduce((a,b) => a.concat(b), [])\n    .forEach(({enemyIdx}) => store.dispatch({type: ActionTypes.ENEMY_COLLIDES_WITH_PIEUWER, enemyIdx: enemyIdx}));\n\n  if (Object.keys(collisions).filter(pieuwerKey => collisions[pieuwerKey].length > 0).length > 0) {\n    store.dispatch({type: ActionTypes.SET_COLLISIONS, collisions: collisions});\n  }\n};\n\nconst handleLaserToPieuwerCollision = (collisions : {pieuwerKeys: Array<string>}) => {\n  const pieuwerStates = store.getState().pieuwerStates;\n  collisions.pieuwerKeys.forEach(pieuwerKey => {\n    store.dispatch({type: ActionTypes.PIEUWER_COLLIDES, player: pieuwerKey})\n    spawnExplosion(\n      { x: pieuwerStates[pieuwerKey].pos.x - 60 + Math.random() * 120,\n        y: pieuwerStates[pieuwerKey].pos.y + Math.random() * 120}, Math.random() * 6\n    );\n  });\n}\n\n\nconst game = (level : Level) => {\n  let gameOver = false;\n  store.dispatch({type: ActionTypes.RESET_INITIAL_STATE});\n\n  eventListeners.add(\"keydown\", (ev : KeyboardEvent) => { onKeyDown(ev.key); });\n  eventListeners.add(\"keyup\", (ev : KeyboardEvent) => { onKeyUp(ev.key); });\n  ['a', 'b', 'x', 'y'].forEach(k => {\n    eventListeners.add(`gamepad-${k}-pressed`, (ev : CustomEvent) => onGamePadButtonDown(\"a\", gamePadToPlayerMap[ev.detail.controllerIndex]));\n    eventListeners.add(`gamepad-${k}-released`, (ev : CustomEvent) => onGamePadButtonUp(\"a\", gamePadToPlayerMap[ev.detail.controllerIndex]));\n  });\n  ['up', 'left', 'right', 'down'].forEach(k => {\n    eventListeners.add(`gamepad-${k}-pressed`, (ev : CustomEvent) => onGamePadButtonDown(k, gamePadToPlayerMap[ev.detail.controllerIndex]));\n    eventListeners.add(`gamepad-${k}-released`, (ev : CustomEvent) => onGamePadButtonUp(k, gamePadToPlayerMap[ev.detail.controllerIndex]));\n  });\n\n  ['r', 'l'].forEach(k => {\n    eventListeners.add(`gamepad-${k}-axis-x-change`, (ev : CustomEvent) =>  {\n      store.dispatch({type: ActionTypes.AXIS_X_CHANGE,\n        player: gamePadToPlayerMap[ev.detail.controllerIndex],\n        axisForce: Math.round(ev.detail.rounded * 0.01)\n      });\n    });\n  });\n\n  ['r', 'l'].forEach(k => {\n    eventListeners.add(`gamepad-${k}-axis-y-change`, (ev : CustomEvent) =>  {\n      store.dispatch({type: ActionTypes.AXIS_Y_CHANGE,\n        player: gamePadToPlayerMap[ev.detail.controllerIndex],\n        axisForce: -Math.round(ev.detail.rounded * 0.01)\n      });\n    });\n  });\n\n  const renderLoop = () => {\n    const { pieuwerStates, bulletStates, enemyStates, explosionStates, collisionStates } = store.getState();\n\n    mainFrameRenderer.clear();\n    mainFrameRenderer.render(\n      bulletStates.bullets.map(drawBullet).concat(\n      bulletStates.enemyBullets.map(drawBullet)).concat(\n      explosionStates.explosions.map(drawExplosion)).concat(\n      enemyStates.enemies.map(drawEnemy).concat(\n      [\n          drawPieuwer(\"pieuwerOne\", pieuwerStates.pieuwerOne),\n          drawPieuwer(\"pieuwerTwo\", pieuwerStates.pieuwerTwo),\n      ]).concat(\n      Object.keys(collisionStates.collisions).map(piewerKey => drawCollisions(pieuwerStates[piewerKey],\n        collisionStates.collisions[piewerKey].map(c => c.collisions.collidingCorners)))).concat(\n      Object.keys(collisionStates.collisions).map(pk => collisionStates.collisions[pk]).reduce((a,b) => a.concat(b), [])\n        .map(({enemyIdx, collisions}) => drawCollisions(enemyStates.enemies[enemyIdx], [collisions.collidingEnemyCorners]))\n      )\n    ));\n    if (!gameOver) {\n  \t   requestAnimationFrame(renderLoop);\n     }\n  };\n\n  let spawns = level(spawnEnemy);\n\n  let uploopinterval : number, bulletInterval : number;\n  const updateLoop = () => {\n    const {pieuwerStates: {pieuwerOne, pieuwerTwo}} = store.getState();\n\n    store.dispatch({type: ActionTypes.UPDATE, pieuwerPositions: [pieuwerOne.pos, pieuwerTwo.pos]});\n\n    const gameState = store.getState();\n\n    detectBulletToEnemyCollisions(gameState)\n      .forEach(handleBulletEnemyCollision);\n\n    detectEnemyBulletToPieuwerCollisions(gameState)\n      .forEach(handleBulletPieuwerCollision);\n\n    detectEnemyLaserToPieuwerCollisions(gameState)\n      .forEach(handleLaserToPieuwerCollision);\n\n\n    handlePieuwerToEnemyCollisions(detectPieuwerToEnemyCollisions(gameState));\n\n\n    gameState.enemyStates.enemies.forEach(spawnBullet);\n\n    if (gameState.pieuwerStates.pieuwerOne.health < 0 || gameState.pieuwerStates.pieuwerTwo.health < 0) {\n      gameOver = true;\n      clearInterval(uploopinterval);\n      clearInterval(bulletInterval);\n      eventListeners.clear();\n      //document.body.innerHTML = `<div style=\"color: white; text-align: center\">BOEM! GAME OVER</div>`;\n      setTimeout(() => pickLevel(), 3000);\n    }\n    if (gameState.enemyStates.enemies.length === 0) {\n      if (spawns.length > 0) {\n        store.dispatch({type: ActionTypes.RESET_ENEMY_CENTRAL});\n        spawns.shift()();\n      } else {\n        gameOver = true;\n        clearInterval(uploopinterval);\n        clearInterval(bulletInterval);\n        //document.body.innerHTML = `<div style=\"color: white; font-size: 5em; text-align: center\">jA!</div>`;\n        setTimeout(() => pickLevel(), 3000);\n      }\n    }\n  }\n  uploopinterval = window.setInterval(updateLoop, 10);\n\n  bulletInterval = window.setInterval(() => {\n    const { pieuwerOne, pieuwerTwo } = store.getState().pieuwerStates;\n    spawnBullet(pieuwerOne);\n    spawnBullet(pieuwerTwo);\n  }, 50);\n\n  renderLoop();\n};\n\nfunction pickLevel() {\n  levelplaat.style.display = \"block\";\n  eventListeners.clear();\n\n  levelplaat.style.top = -(levelplaat.clientHeight - window.innerHeight) + \"px\";\n  const start = (ev: CustomEvent) => {\n    eventListeners.clear();\n    levelplaat.style.display = \"none\";\n    game(level1);\n  };\n  eventListeners.add(`gamepad-start-pressed`, (ev: CustomEvent) => start);\n  eventListeners.add(`keydown`, start);\n}\n\npreload(pickLevel);\n"],"sourceRoot":""}